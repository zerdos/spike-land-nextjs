# Implementation Plan: Enhanced Frontend UI with shadcn/ui (#940)

**Ticket**: #940
**Type**: Feature Enhancement
**Priority**: Medium
**Complexity**: Medium

---

## Summary

Systematically enhance the Spike Land frontend UI by replacing custom/inconsistent components with professional shadcn/ui components, applying consistent theming, and improving overall UI capability and accessibility.

---

## Current State Analysis

### What's Already In Place

1. **shadcn/ui Foundation**: Already installed with 40+ components including:
   - Base components: Button, Card, Input, Label, Badge, Checkbox, Radio Group
   - Dialogs & Overlays: Dialog, AlertDialog, Sheet, Popover, Tooltip
   - Data Display: Table, Tabs, Accordion, Separator, Avatar
   - Forms: Form, Select, Textarea, Slider, Switch
   - Feedback: Alert, Progress, Skeleton, Sonner (toast)

2. **Theming System**: Comprehensive dark mode theme with:
   - HSL-based CSS variables (`--background`, `--primary`, `--accent`, etc.)
   - Tailwind 4.x configuration with glass-morphism utilities
   - Consistent color palette (Aurora green/teal/lime/yellow)
   - Custom animations and effects

3. **Utility Setup**:
   - `cn()` utility for class merging (src/lib/utils.ts)
   - Tailwind merge + clsx already configured

### Components Needing Enhancement

**Priority 1: High-Traffic Pages**

- `/src/app/my-apps/page.tsx` - Uses basic `<input>` instead of Input component
- `/src/app/albums/[id]/*` - Mix of custom and shadcn components
- `/src/components/auth/*` - Sign-in/out buttons could use consistent variants

**Priority 2: Custom Components to Replace**

- Search inputs across the app (raw `<input>` elements)
- Filter badges (some use Badge, others use custom styles)
- Custom form elements that don't use shadcn Form component

**Priority 3: Consistency Issues**

- Inline Tailwind classes that should use component variants
- Inconsistent spacing/sizing across similar components
- Missing hover/focus states on interactive elements

---

## Implementation Strategy

### Phase 1: Audit & Inventory (Preparation)

**Tasks:**

1. Create inventory of all UI components by category:
   - Forms & Inputs
   - Buttons & CTAs
   - Cards & Containers
   - Navigation Elements
   - Data Display

2. Document existing patterns:
   - Custom className patterns that can be extracted to variants
   - Reusable component compositions
   - Accessibility attributes currently in use

3. Identify missing shadcn/ui components needed:
   - Command (for search/command palette)
   - Combobox (for advanced select)
   - Date Picker (if needed)
   - Additional feedback components

**Output**: `docs/ui-audit-940.md` with categorized component inventory

### Phase 2: Install Missing Components

**Install via shadcn CLI:**

```bash
npx shadcn@latest add command
npx shadcn@latest add combobox
# Add any other identified missing components
```

**Files Created/Modified:**

- `src/components/ui/command.tsx`
- `src/components/ui/combobox.tsx`
- May update `src/components/ui/` with newer versions if needed

### Phase 3: Replace Basic Inputs & Forms

**Target Files:**

- `src/app/my-apps/page.tsx` (lines 125-131, 183-190)
  - Replace raw `<input type="search">` with `<Input>` component
  - Wrap in proper form structure with `<Form>` if needed

**Example Replacement:**

```tsx
// Before
<input
  type="search"
  placeholder="Search apps..."
  className="w-full rounded-md border border-input bg-background px-4 py-2..."
  disabled
/>

// After
<Input
  type="search"
  placeholder="Search apps..."
  className="w-full"
  disabled
  aria-label="Search apps"
/>
```

**Files to Modify:**

- `src/app/my-apps/page.tsx` - Replace search inputs
- `src/app/albums/[id]/components/*.tsx` - Audit for raw inputs
- `src/components/enhance/*.tsx` - Replace any basic form elements

### Phase 4: Standardize Interactive Components

**Buttons:**

- Audit all button usage for consistent variants:
  - `default` - Primary actions
  - `outline` - Secondary actions
  - `ghost` - Tertiary/icon-only
  - `destructive` - Delete/cancel
  - `link` - Navigation

**Example Pattern:**

```tsx
// Ensure all buttons use consistent size prop
<Button size="lg" variant="default">Create New App</Button>
<Button size="sm" variant="ghost">Bin</Button>
```

**Files to Review:**

- All `src/app/**/*.tsx` files with Button usage
- Ensure lucide-react icons are properly sized with buttons

**Cards:**

- Ensure all card-like containers use `<Card>`, `<CardHeader>`, `<CardContent>`
- Remove custom `.glass-card` classes in favor of shadcn Card + Tailwind utilities

### Phase 5: Apply Consistent Theming

**Color Usage:**

- Audit for hardcoded colors, replace with theme variables:
  - `text-emerald-500` → `text-primary`
  - `bg-zinc-950` → `bg-background`
  - `border-zinc-800` → `border-border`

**Spacing:**

- Standardize gap/padding patterns:
  - Small gaps: `gap-2`
  - Medium gaps: `gap-4`
  - Large gaps: `gap-6` or `gap-8`
  - Section spacing: use existing `section-spacing` utility

**Files to Audit:**

- `src/app/**/*.tsx` - All page components
- `src/components/**/*.tsx` - All shared components

### Phase 6: Improve Accessibility

**Add Missing ARIA Attributes:**

- All interactive elements need proper labels
- Form inputs need associated `<Label>` components
- Dialogs need proper `aria-describedby`

**Focus Management:**

- Ensure all interactive elements have visible focus rings
- Use shadcn's built-in focus-visible utilities
- Test keyboard navigation flow

**Screen Reader Support:**

- Add `aria-label` to icon-only buttons
- Use `<VisuallyHidden>` for screen-reader-only text
- Ensure form validation errors are announced

**Files to Modify:**

- All components with interactive elements
- Priority: forms, dialogs, navigation

### Phase 7: Testing & Validation

**Unit Tests:**

- Update component tests to match new shadcn components
- Test accessibility with @testing-library/jest-dom
- Ensure 100% coverage maintained

**Visual Regression:**

- Manually test all modified pages
- Check responsive behavior (mobile, tablet, desktop)
- Verify dark mode consistency

**Accessibility Testing:**

- Run automated checks (e.g., axe-core)
- Manual keyboard navigation testing
- Screen reader spot checks

---

## Files Expected to Change

### New Files

- `docs/ui-audit-940.md` - Component inventory
- `src/components/ui/command.tsx` (if added)
- `src/components/ui/combobox.tsx` (if added)

### Modified Files (Priority Order)

**High Priority:**

- `src/app/my-apps/page.tsx` - Replace search inputs, standardize buttons
- `src/app/profile/page.tsx` - Ensure consistent form components
- `src/app/settings/page.tsx` - Form standardization
- `src/components/auth/sign-in-button.tsx` - Verify button usage
- `src/components/auth/sign-out-button.tsx` - Verify button usage

**Medium Priority:**

- `src/app/albums/[id]/components/AlbumSettingsDialog.tsx` - Form components
- `src/app/albums/[id]/components/MoveToAlbumDialog.tsx` - Dialog structure
- `src/components/enhance/CreateAlbumDialog.tsx` - Dialog + Form
- `src/components/enhance/AlbumSelector.tsx` - Select component
- `src/components/tokens/PackageCard.tsx` - Card consistency

**Lower Priority (Spot Fixes):**

- `src/components/enhance/*.tsx` - Various form/input components
- `src/components/apps/*.tsx` - Card and layout components
- `src/components/landing/*.tsx` - Button consistency

**Test Files:**

- Update corresponding `.test.tsx` files for all modified components

---

## Testing Requirements

### Unit Tests

- [ ] All modified components maintain 100% coverage
- [ ] New component variants are tested
- [ ] Accessibility attributes are verified in tests

### E2E Tests

- [ ] Search functionality still works
- [ ] Form submissions work correctly
- [ ] Dialogs open/close properly
- [ ] Keyboard navigation flows work

### Manual Testing Checklist

- [ ] My Apps page: search input works, buttons are consistent
- [ ] Settings page: all form inputs use shadcn components
- [ ] Album dialogs: proper focus management
- [ ] Responsive: all components work on mobile/tablet
- [ ] Accessibility: keyboard navigation works throughout
- [ ] Dark mode: consistent theming across all pages

---

## Rollout Plan

1. **Phase 1-2**: Complete audit and install missing components (1-2 hours)
2. **Phase 3**: Replace basic inputs (2-3 hours)
3. **Phase 4**: Standardize buttons and cards (2-3 hours)
4. **Phase 5**: Apply consistent theming (2-3 hours)
5. **Phase 6**: Accessibility improvements (2-3 hours)
6. **Phase 7**: Testing and fixes (2-3 hours)

**Estimated Total**: 11-17 hours of focused work

---

## Success Criteria

✅ All custom form inputs replaced with shadcn Input/Textarea
✅ Consistent button variants across the application
✅ Uniform card styling using shadcn Card component
✅ Theme variables used instead of hardcoded colors
✅ All interactive elements have proper ARIA labels
✅ 100% unit test coverage maintained
✅ No visual regressions on key pages
✅ Improved keyboard navigation experience

---

## Out of Scope

- ❌ Complete redesign of page layouts
- ❌ Adding new features or functionality
- ❌ Changing the color scheme or theme
- ❌ Migrating to a different UI library
- ❌ Adding light mode support (dark mode only per design system)
- ❌ Refactoring non-UI logic or API calls

---

## Risks & Mitigations

| Risk                            | Impact | Mitigation                                        |
| ------------------------------- | ------ | ------------------------------------------------- |
| Breaking existing functionality | High   | Comprehensive testing, feature-by-feature rollout |
| Visual regressions              | Medium | Manual visual checks, screenshot comparisons      |
| Accessibility regressions       | Medium | Automated a11y tests, manual keyboard testing     |
| Test coverage drops below 100%  | High   | Update tests alongside component changes          |
| Inconsistent component usage    | Low    | Clear examples in audit document                  |

---

## Notes

- This is a **refinement task**, not a rewrite
- Preserve all existing functionality
- Focus on consistency and accessibility
- Use existing shadcn components wherever possible
- Follow the project's established patterns (Tailwind 4, dark mode only)
- All changes must pass CI/CD checks before merging
