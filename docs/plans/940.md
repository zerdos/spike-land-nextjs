# Implementation Plan: Enhanced Frontend UI with shadcn/ui

**Issue:** #940
**Created:** 2026-01-29
**Status:** Planning

---

## Summary

Audit and enhance the frontend UI by ensuring consistent usage of shadcn/ui components throughout the application. The codebase already has shadcn/ui configured (New York style, neutral base color) with many components installed. This plan focuses on:

1. Auditing existing UI for inconsistencies
2. Replacing custom-styled elements with shadcn components
3. Ensuring consistent theming and accessibility
4. No flow redesign - strictly UI component enhancement

---

## Current State Analysis

### ‚úÖ Already Configured

- **shadcn/ui config:** `components.json` configured with New York style, RSC support, CSS variables
- **Theme system:** Dark-only theme with custom Aurora color palette (emerald/teal/lime/yellow)
- **Existing components:** 40+ shadcn components already installed in `src/components/ui/`
- **Tailwind:** v4 with extensive custom utilities (glass-morphism, gradients, animations)

### üîç Areas Needing Attention

#### 1. **Inline HTML Elements** (Priority: HIGH)

- **Files with raw `<input>` tags:** 9 files found
  - `src/app/my-apps/page.tsx:125-130` - Search input (disabled state)
  - `src/app/my-apps/page.tsx:183-190` - Search input (active state)
  - Other files in orbit, albums, blendr, etc.
- **Files with raw `<button>` tags:** 15+ files
- **Action:** Replace with shadcn `<Input>` and `<Button>` components

#### 2. **Inconsistent Form Patterns**

- Some pages use shadcn `Input`, others use inline styled inputs
- Mix of custom classes vs. component variants
- **Action:** Standardize all forms to use shadcn components

#### 3. **Custom Card Implementations**

- `PackageCard` component uses custom gradient classes
- Some pages have custom card styling instead of shadcn `Card`
- **Action:** Refactor to use shadcn `Card` with custom variants where needed

#### 4. **Missing Component Usage**

- Pages could benefit from additional shadcn components:
  - `Select` for dropdowns
  - `Popover` for menus
  - `Badge` for status indicators (some already use it)
  - `Alert` for messages

---

## Implementation Steps

### Phase 1: Audit & Document (2 files to create)

**Create audit document:**

- File: `docs/ui-audit-940.md`
- Content: Complete list of files with custom UI elements
- Group by: Input elements, Buttons, Cards, Forms, Dialogs

**Complexity:** Simple
**Estimated files affected:** 1 new documentation file

---

### Phase 2: Replace Inline Input Elements (Priority: HIGH)

**Files to modify:**

1. **`src/app/my-apps/page.tsx:125-130, 183-190`**
   - Replace raw `<input>` with shadcn `<Input>` component
   - Maintain disabled state and styling
   - Keep aria-label for accessibility

2. **`src/app/albums/[id]/AlbumDetailClient.tsx`**
   - Audit for raw input elements
   - Replace with shadcn components

3. **`src/app/orbit/[workspaceSlug]/brand-brain/setup/components/ui/ColorPaletteInput.tsx`**
   - Custom input - may need to extend shadcn `Input`

4. **`src/app/orbit/[workspaceSlug]/brand-brain/setup/components/ui/LogoUpload.tsx`**
   - File input - ensure uses shadcn styling

5. **`src/app/blendr/BlendrImageSlot.tsx`**
   - Check for input consistency

6. **`src/app/test-enhancement/page.tsx`**
   - Audit all form inputs

7. **`src/app/referrals/page.tsx`**
   - Replace inline inputs

8. **`src/app/apps/tabletop-simulator/page.tsx`**
   - Audit and replace

**Testing:**

- Run unit tests for each modified file
- Visual regression testing on affected pages
- Accessibility testing with screen readers

**Complexity:** Medium
**Risk:** Low - straightforward component replacement
**Estimated files:** 8 files modified

---

### Phase 3: Standardize Button Usage (Priority: HIGH)

**Files to modify:**

1. **Orbit components:** 15+ files with raw `<button>` tags
   - `src/app/orbit/[workspaceSlug]/streams/StreamsClient.tsx`
   - `src/app/orbit/[workspaceSlug]/OrbitSidebar.tsx`
   - And others found in grep results

2. **Action for each:**
   - Import `Button` from `@/components/ui/button`
   - Replace `<button>` with `<Button>`
   - Apply appropriate variant (`default`, `outline`, `ghost`, `destructive`)
   - Maintain existing functionality and event handlers

**Complexity:** Medium
**Risk:** Low - well-defined component API
**Estimated files:** 15 files modified

---

### Phase 4: Enhance Card Components (Priority: MEDIUM)

**Files to modify:**

1. **`src/components/tokens/PackageCard.tsx`**
   - Refactor to use shadcn `Card` as base
   - Preserve gradient styling as custom variant
   - Extract gradient classes to separate variant system
   - **Before:**
     ```tsx
     <div className={cn("relative rounded-2xl p-6", gradient)}>
     ```
   - **After:**
     ```tsx
     <Card className={cn("relative", gradient)}>
       <CardHeader>...</CardHeader>
       <CardContent>...</CardContent>
     </Card>;
     ```

2. **Other custom cards** (found during audit)
   - Standardize to shadcn `Card`, `CardHeader`, `CardContent`, `CardFooter`

**Complexity:** Medium
**Risk:** Medium - visual changes need careful review
**Estimated files:** 3-5 files modified

---

### Phase 5: Add Missing shadcn Components (Priority: LOW)

**Install additional components if needed:**

```bash
npx shadcn@latest add select
npx shadcn@latest add popover
npx shadcn@latest add alert
npx shadcn@latest add command
```

**Replace custom implementations:**

- Search dropdowns ‚Üí `Select` component
- Filter menus ‚Üí `Popover` + `Command`
- Error messages ‚Üí `Alert` component

**Complexity:** Medium
**Risk:** Low - additive changes
**Estimated files:** 5-8 files modified

---

### Phase 6: Theme Consistency & Accessibility (Priority: MEDIUM)

**Actions:**

1. **Color Consistency Audit**
   - Verify all components use CSS variables from `globals.css`
   - Check for hardcoded color values (search for `#` in tsx files)
   - Replace with Tailwind theme tokens (`hsl(var(--primary))`)

2. **Focus States**
   - Ensure all interactive elements have visible focus indicators
   - Test keyboard navigation flow
   - Add `focus-visible:ring-2` where missing

3. **ARIA Labels**
   - Audit all form inputs for proper labels
   - Add `aria-label` or `<Label>` component where missing
   - Test with screen reader

4. **Dark Mode Verification**
   - Verify all pages render correctly in dark mode (only theme)
   - Check contrast ratios meet WCAG AA standards

**Files to check:**

- All pages in `src/app/`
- All components in `src/components/`

**Complexity:** Medium
**Risk:** Low - accessibility improvements
**Estimated files:** Multiple files, small changes per file

---

### Phase 7: Testing & Documentation (Priority: HIGH)

**Unit Tests:**

- Update existing component tests to reflect shadcn usage
- Add new tests for modified components
- Ensure 100% coverage maintained

**E2E Tests:**

- Update Playwright tests for changed selectors
- Add visual regression tests for key pages
- Test keyboard navigation flows

**Documentation:**

- Update component usage examples in `CLAUDE.md` if needed
- Document any custom shadcn variants created
- Create style guide for future component usage

**Complexity:** Medium
**Risk:** Low - validation only
**Estimated files:** Test files + documentation

---

## Files Expected to Change

### New Files (2)

- `docs/ui-audit-940.md` - Audit results
- `docs/plans/940.md` - This file (already created)

### Modified Files (30-40 estimated)

**High Priority:**

- `src/app/my-apps/page.tsx` - Replace inline inputs
- `src/app/albums/[id]/AlbumDetailClient.tsx` - Input standardization
- `src/app/orbit/**/*.tsx` - Button/input replacements (15+ files)
- `src/components/tokens/PackageCard.tsx` - Card refactor

**Medium Priority:**

- `src/app/blendr/BlendrImageSlot.tsx`
- `src/app/test-enhancement/page.tsx`
- `src/app/referrals/page.tsx`
- `src/app/apps/tabletop-simulator/page.tsx`

**Test Files:**

- Corresponding `.test.tsx` files for all modified components

---

## Out of Scope

- ‚ùå Complete redesign of application flow
- ‚ùå Changing routing structure
- ‚ùå Modifying business logic
- ‚ùå Adding new features beyond UI enhancement
- ‚ùå Changing the Aurora color palette
- ‚ùå Modifying animation system
- ‚ùå Light mode implementation (dark-only is intentional)

---

## Risks & Mitigations

### Risk 1: Visual Regression

**Impact:** Medium
**Mitigation:**

- Take screenshots before changes
- Run Playwright visual regression tests
- Manual QA on Vercel preview

### Risk 2: Breaking Existing Tests

**Impact:** Medium
**Mitigation:**

- Update tests incrementally with code changes
- Run full test suite before each commit
- Maintain 100% coverage requirement

### Risk 3: Accessibility Regressions

**Impact:** Low
**Mitigation:**

- shadcn components are accessible by default
- Manual testing with keyboard navigation
- Screen reader testing

### Risk 4: Performance Impact

**Impact:** Low
**Mitigation:**

- shadcn uses Radix UI primitives (optimized)
- No significant bundle size increase expected
- Monitor bundle size in CI

---

## Success Criteria

### Acceptance Criteria (from issue)

- [x] ‚úÖ Audit current UI components that are basic or inconsistent
- [ ] Replace custom/messy components with shadcn/ui components (Buttons, Cards, Dialogs, Inputs)
- [ ] Apply consistent theming across the application
- [ ] Improve capability and accessibility of the UI

### Additional Metrics

- **Code Quality:**
  - All unit tests passing
  - 100% test coverage maintained
  - No ESLint errors

- **Accessibility:**
  - All forms have proper labels
  - Keyboard navigation works on all pages
  - WCAG AA contrast standards met

- **Consistency:**
  - Zero raw `<input>` tags in app code
  - Zero raw `<button>` tags (except special cases)
  - All cards use shadcn `Card` component

---

## Implementation Order

1. **Phase 1** (Audit) - Start here
2. **Phase 2** (Inputs) - High impact, low risk
3. **Phase 3** (Buttons) - High impact, low risk
4. **Phase 4** (Cards) - Medium impact, needs visual review
5. **Phase 6** (Accessibility) - Can run parallel with 2-4
6. **Phase 5** (New components) - After core replacements
7. **Phase 7** (Testing) - Final validation

---

## Notes for Implementation

### Component Import Pattern

```tsx
// Always import from @/components/ui/
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
```

### Common Variants

```tsx
// Buttons
<Button variant="default">Primary</Button>
<Button variant="outline">Secondary</Button>
<Button variant="ghost">Tertiary</Button>
<Button variant="destructive">Danger</Button>

// Inputs - maintain existing classes for consistency
<Input className="..." />  // Inherits theme styles
```

### Testing Pattern

```tsx
// Maintain existing test patterns
it("should render input correctly", () => {
  render(<MyComponent />);
  const input = screen.getByLabelText("Search");
  expect(input).toBeInTheDocument();
});
```

---

## Questions for User (to resolve before implementation)

1. Should we create custom shadcn variants for the gradient cards, or keep them as custom components?
2. Are there any specific pages/components with high traffic that need extra caution?
3. Should we tackle all phases at once or iterate phase by phase?

---

**Plan Status:** Ready for approval
**Next Step:** Await user confirmation to begin Phase 1 (Audit)
