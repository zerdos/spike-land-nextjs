# Database Schema Documentation

> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [default](#default)

## default

```mermaid
erDiagram
"users" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  DateTime createdAt
  DateTime updatedAt
  String stripeCustomerId UK "nullable"
  UserRole role
  String referralCode UK "nullable"
  String referredById FK "nullable"
  Int referralCount
  String passwordHash "nullable"
}
"campaign_briefs" {
  String id PK
  String userId FK
  String name
  Json targetAudience
  Json campaignObjectives
  String status
  DateTime createdAt
  DateTime updatedAt
}
"campaign_target_audiences" {
  String id PK
  String briefId FK,UK
  Int ageMin "nullable"
  Int ageMax "nullable"
  String genders
  String locations
  String interests
  String behaviors
  DateTime createdAt
  DateTime updatedAt
}
"campaign_objectives" {
  String id PK
  String briefId FK
  ObjectiveType type
  String metric
  Float targetValue "nullable"
  DateTime deadline "nullable"
  Int priority
  DateTime createdAt
  DateTime updatedAt
}
"accounts" {
  String id PK
  String userId FK
  String type
  String provider
  String providerAccountId
  String refresh_token "nullable"
  String access_token "nullable"
  Int expires_at "nullable"
  String token_type "nullable"
  String scope "nullable"
  String id_token "nullable"
  String session_state "nullable"
}
"marketing_accounts" {
  String id PK
  String userId FK
  MarketingPlatform platform
  String accountId
  String accountName "nullable"
  String accessToken
  String refreshToken "nullable"
  DateTime expiresAt "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"google_ads_campaigns" {
  String id PK
  String marketingAccountId FK
  String campaignId UK
  String name
  String status
  Int spend
  DateTime createdAt
  DateTime updatedAt
}
"sessions" {
  String id PK
  String sessionToken UK
  String userId FK
  DateTime expires
}
"verification_tokens" {
  String identifier
  String token UK
  DateTime expires
}
"apps" {
  String id PK
  String name
  String slug UK "nullable"
  String description "nullable"
  String userId FK
  String forkedFrom FK "nullable"
  AppBuildStatus status
  String domain UK "nullable"
  String codespaceId UK "nullable"
  String codespaceUrl "nullable"
  Boolean isCurated
  Boolean isPublic
  DateTime lastAgentActivity "nullable"
  DateTime deletedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"requirements" {
  String id PK
  String appId FK
  String description
  RequirementPriority priority
  RequirementStatus status
  Int version
  DateTime createdAt
  DateTime updatedAt
}
"monetization_models" {
  String id PK
  String appId FK
  MonetizationType type
  Decimal(10) price "nullable"
  SubscriptionInterval subscriptionInterval "nullable"
  String features
  DateTime createdAt
  DateTime updatedAt
}
"app_messages" {
  String id PK
  String appId FK
  AppMessageRole role
  String content
  Boolean isRead
  Json metadata "nullable"
  DateTime deletedAt "nullable"
  DateTime createdAt
}
"app_status_history" {
  String id PK
  String appId FK
  AppBuildStatus status
  String message "nullable"
  Json metadata "nullable"
  DateTime createdAt
}
"app_images" {
  String id PK
  String appId FK
  String originalUrl
  String r2Key
  Int width
  Int height
  Int sizeBytes
  String format
  String tags
  String aiDescription "nullable"
  Json analysisJson "nullable"
  DateTime createdAt
}
"app_attachments" {
  String id PK
  String messageId FK
  String imageId FK
  DateTime createdAt
}
"app_code_versions" {
  String id PK
  String appId FK
  String messageId FK,UK "nullable"
  String code
  String hash
  String description "nullable"
  DateTime createdAt
}
"user_token_balances" {
  String id PK
  String userId FK,UK
  Int balance
  DateTime lastRegeneration
  SubscriptionTier tier
  DateTime createdAt
  DateTime updatedAt
}
"token_transactions" {
  String id PK
  String userId FK
  Int amount
  TokenTransactionType type
  String source "nullable"
  String sourceId "nullable"
  Int balanceAfter
  Json metadata "nullable"
  DateTime createdAt
}
"tokens_packages" {
  String id PK
  String name
  Int tokens
  Decimal(10) priceUSD
  String stripePriceId UK
  Boolean active
  Int sortOrder
  DateTime createdAt
  DateTime updatedAt
}
"stripe_payments" {
  String id PK
  String userId FK
  String packageId FK
  Int tokensGranted
  Decimal(10) amountUSD
  String stripePaymentIntentId UK
  StripePaymentStatus status
  Json metadata "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"enhanced_images" {
  String id PK
  String userId FK
  String name
  String description "nullable"
  String originalUrl
  String originalR2Key
  Int originalWidth
  Int originalHeight
  Int originalSizeBytes
  String originalFormat
  Boolean isPublic
  Int viewCount
  DateTime createdAt
  DateTime updatedAt
  String shareToken UK "nullable"
}
"image_enhancement_jobs" {
  String id PK
  String imageId FK
  String userId FK
  EnhancementTier tier
  Int tokensCost
  JobStatus status
  PipelineStage currentStage "nullable"
  String enhancedUrl "nullable"
  String enhancedR2Key "nullable"
  Int enhancedWidth "nullable"
  Int enhancedHeight "nullable"
  Int enhancedSizeBytes "nullable"
  String errorMessage "nullable"
  Int retryCount
  Int maxRetries
  String geminiPrompt "nullable"
  String geminiModel "nullable"
  Float geminiTemp "nullable"
  DateTime processingStartedAt "nullable"
  DateTime processingCompletedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
  String workflowRunId "nullable"
  Json analysisResult "nullable"
  String analysisSource "nullable"
  String altText "nullable"
  Float qualityScore "nullable"
  Boolean wasCropped
  Json cropDimensions "nullable"
  String pipelineId FK "nullable"
  String sourceImageId FK "nullable"
  Boolean isBlend
  Boolean isAnonymous
}
"subscriptions" {
  String id PK
  String userId FK,UK
  String stripeSubscriptionId UK
  String stripePriceId
  SubscriptionStatus status
  SubscriptionTier tier
  DateTime currentPeriodStart
  DateTime currentPeriodEnd
  Boolean cancelAtPeriodEnd
  SubscriptionTier downgradeTo "nullable"
  Int tokensPerMonth
  Int rolloverTokens
  Int maxRollover
  DateTime createdAt
  DateTime updatedAt
}
"subscription_plans" {
  String id PK
  String name
  Int tokensPerMonth
  Decimal(10) priceGBP
  String stripePriceId UK
  Int maxRollover
  Boolean priority
  Boolean apiAccess
  Boolean active
  Int sortOrder
  DateTime createdAt
  DateTime updatedAt
}
"albums" {
  String id PK
  String userId FK
  String name
  String description "nullable"
  String coverImageId "nullable"
  AlbumPrivacy privacy
  EnhancementTier defaultTier
  String shareToken UK "nullable"
  Int sortOrder
  DateTime createdAt
  DateTime updatedAt
  String pipelineId FK "nullable"
}
"album_images" {
  String id PK
  String albumId FK
  String imageId FK
  Int sortOrder
  DateTime addedAt
}
"vouchers" {
  String id PK
  String code UK
  VoucherType type
  Int value
  Int maxUses "nullable"
  Int currentUses
  DateTime expiresAt "nullable"
  VoucherStatus status
  Json metadata "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"voucher_redemptions" {
  String id PK
  String voucherId FK
  String userId FK
  Int tokensGranted
  DateTime redeemedAt
}
"referrals" {
  String id PK
  String referrerId FK
  String refereeId FK
  ReferralStatus status
  Int tokensGranted
  String ipAddress "nullable"
  DateTime createdAt
  DateTime completedAt "nullable"
}
"audit_logs" {
  String id PK
  String userId FK
  AuditAction action
  String targetId "nullable"
  String targetType "nullable"
  String resourceId "nullable"
  String resourceType "nullable"
  Json metadata "nullable"
  String ipAddress "nullable"
  String userAgent "nullable"
  String sessionId "nullable"
  DateTime createdAt
}
"workspace_audit_logs" {
  String id PK
  String workspaceId FK
  String userId FK
  AuditAction action
  String targetId "nullable"
  String targetType "nullable"
  String resourceId "nullable"
  String resourceType "nullable"
  Json oldValue "nullable"
  Json newValue "nullable"
  Json metadata "nullable"
  String ipAddress "nullable"
  String userAgent "nullable"
  DateTime createdAt
}
"ai_decision_logs" {
  String id PK
  String workspaceId FK "nullable"
  String userId FK "nullable"
  String requestType
  String inputPrompt "nullable"
  Json inputContext "nullable"
  String outputResult "nullable"
  Json outputMetadata "nullable"
  String modelId "nullable"
  String modelVersion "nullable"
  Int tokensUsed "nullable"
  Int latencyMs "nullable"
  String status
  String errorMessage "nullable"
  DateTime createdAt
}
"audit_retention_policies" {
  String id PK
  String workspaceId FK "nullable"
  String name
  String description "nullable"
  Int retentionDays
  Int archiveAfterDays "nullable"
  Int deleteAfterDays "nullable"
  String actionTypes
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"archived_audit_logs" {
  String id PK
  String originalId
  String workspaceId "nullable"
  String userId
  String action
  String targetId "nullable"
  String targetType "nullable"
  String resourceId "nullable"
  String resourceType "nullable"
  Json metadata "nullable"
  String ipAddress "nullable"
  String userAgent "nullable"
  DateTime originalCreatedAt
  DateTime archivedAt
  String retentionPolicyId "nullable"
  String archiveReason "nullable"
}
"error_logs" {
  String id PK
  DateTime timestamp
  String message
  String stack "nullable"
  String sourceFile "nullable"
  Int sourceLine "nullable"
  Int sourceColumn "nullable"
  String callerName "nullable"
  String userId "nullable"
  String route "nullable"
  ErrorEnvironment environment
  String errorType "nullable"
  String errorCode "nullable"
  Json metadata "nullable"
}
"feedback" {
  String id PK
  String userId FK "nullable"
  String email "nullable"
  FeedbackType type
  String message
  String page
  String userAgent "nullable"
  FeedbackStatus status
  String adminNote "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"inbox_suggested_responses" {
  String id PK
  String inboxItemId FK
  String content
  String tone
  Float confidenceScore
  String category
  Boolean isPreferred
  Json metadata "nullable"
  DateTime createdAt
}
"escalation_events" {
  String id PK
  String inboxItemId FK
  EscalationEventType eventType
  Int fromLevel
  Int toLevel
  String fromUserId "nullable"
  String toUserId "nullable"
  String reason "nullable"
  EscalationTrigger triggeredBy
  Json metadata "nullable"
  DateTime createdAt
}
"featured_gallery_items" {
  String id PK
  String title
  String description "nullable"
  GalleryCategory category
  String originalUrl
  String enhancedUrl
  Int width
  Int height
  String sourceImageId FK "nullable"
  String sourceJobId FK "nullable"
  Int sortOrder
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
  String createdBy FK
}
"box_tiers" {
  String id PK
  String name
  String description "nullable"
  Int cpu
  Int ram
  Int storage
  Int pricePerHour
  Int pricePerMonth
  Boolean isActive
  Int sortOrder
  DateTime createdAt
  DateTime updatedAt
}
"boxes" {
  String id PK
  String name
  String description "nullable"
  String userId FK
  String tierId FK "nullable"
  BoxStatus status
  String connectionUrl "nullable"
  String storageVolumeId "nullable"
  DateTime createdAt
  DateTime updatedAt
  DateTime deletedAt "nullable"
}
"box_actions" {
  String id PK
  String boxId FK
  BoxActionType action
  JobStatus status
  Json metadata "nullable"
  String error "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"agent_tasks" {
  String id PK
  String boxId FK
  String type
  Json payload "nullable"
  JobStatus status
  Json result "nullable"
  String error "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"sandbox_jobs" {
  String id PK
  String appId FK
  String messageId UK
  String sandboxId "nullable"
  String requestId "nullable"
  SandboxJobStatus status
  Json result "nullable"
  String error "nullable"
  DateTime startedAt
  DateTime completedAt "nullable"
}
"email_logs" {
  String id PK
  String userId FK
  String to
  String subject
  String template
  EmailStatus status
  String resendId UK "nullable"
  DateTime sentAt
  DateTime openedAt "nullable"
  DateTime clickedAt "nullable"
  DateTime bouncedAt "nullable"
  Json metadata "nullable"
}
"tracked_urls" {
  String id PK
  String path UK
  String label "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
  String createdById FK
}
"api_keys" {
  String id PK
  String userId FK
  String name
  String keyHash UK
  String keyPrefix
  DateTime lastUsedAt "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"mcp_generation_jobs" {
  String id PK
  String userId FK
  String apiKeyId FK "nullable"
  McpJobType type
  EnhancementTier tier
  Int tokensCost
  JobStatus status
  String prompt
  String inputImageUrl "nullable"
  String inputImageR2Key "nullable"
  String outputImageUrl "nullable"
  String outputImageR2Key "nullable"
  Int outputWidth "nullable"
  Int outputHeight "nullable"
  Int outputSizeBytes "nullable"
  String errorMessage "nullable"
  String geminiModel "nullable"
  DateTime processingStartedAt "nullable"
  DateTime processingCompletedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"box_messages" {
  String id PK
  String boxId FK
  BoxMessageRole role
  String content
  DateTime createdAt
}
"enhancement_pipelines" {
  String id PK
  String name
  String description "nullable"
  String userId FK "nullable"
  PipelineVisibility visibility
  String shareToken UK "nullable"
  EnhancementTier tier
  Json analysisConfig "nullable"
  Json autoCropConfig "nullable"
  Json promptConfig "nullable"
  Json generationConfig "nullable"
  Int usageCount
  DateTime createdAt
  DateTime updatedAt
}
"visitor_sessions" {
  String id PK
  String visitorId
  String userId FK "nullable"
  DateTime sessionStart
  DateTime sessionEnd "nullable"
  String deviceType "nullable"
  String browser "nullable"
  String os "nullable"
  String ipCountry "nullable"
  String ipCity "nullable"
  String referrer "nullable"
  String landingPage
  String exitPage "nullable"
  Int pageViewCount
  String utmSource "nullable"
  String utmMedium "nullable"
  String utmCampaign "nullable"
  String utmTerm "nullable"
  String utmContent "nullable"
  String gclid "nullable"
  String fbclid "nullable"
}
"page_views" {
  String id PK
  String sessionId FK
  String path
  String title "nullable"
  DateTime timestamp
  Int timeOnPage "nullable"
  Int scrollDepth "nullable"
}
"analytics_events" {
  String id PK
  String sessionId FK
  String name
  String category "nullable"
  Float value "nullable"
  Json metadata "nullable"
  DateTime timestamp
}
"campaign_attributions" {
  String id PK
  String userId FK
  String sessionId
  String conversionId
  AttributionType attributionType
  String platform "nullable"
  String externalCampaignId "nullable"
  String utmCampaign "nullable"
  String utmSource "nullable"
  String utmMedium "nullable"
  ConversionType conversionType
  Float conversionValue "nullable"
  DateTime convertedAt
}
"campaign_metrics_cache" {
  String id PK
  String cacheKey UK
  Json metrics
  DateTime computedAt
  DateTime expiresAt
}
"campaign_links" {
  String id PK
  String utmCampaign
  String platform
  String externalCampaignId
  String externalCampaignName "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"audio_mixer_projects" {
  String id PK
  String userId FK
  String name
  String description "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"audio_tracks" {
  String id PK
  String projectId FK
  String name
  String fileUrl "nullable"
  String fileR2Key "nullable"
  String fileFormat
  Float duration
  Int fileSizeBytes
  Float volume
  Boolean muted
  Boolean solo
  Int sortOrder
  AudioStorageType storageType
  DateTime createdAt
  DateTime updatedAt
}
"merch_categories" {
  String id PK
  String name UK
  String slug UK
  String description "nullable"
  String icon "nullable"
  Int sortOrder
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"merch_products" {
  String id PK
  String name
  String description "nullable"
  String categoryId FK
  PodProvider provider
  String providerSku
  Decimal(10) basePrice
  Decimal(10) retailPrice
  String currency
  Boolean isActive
  Int minDpi
  Int minWidth
  Int minHeight
  Int printAreaWidth "nullable"
  Int printAreaHeight "nullable"
  String mockupTemplate "nullable"
  Int sortOrder
  DateTime createdAt
  DateTime updatedAt
}
"merch_variants" {
  String id PK
  String productId FK
  String name
  String providerSku
  Decimal(10) priceDelta
  Boolean isActive
  Json attributes "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"merch_carts" {
  String id PK
  String userId FK,UK
  DateTime createdAt
  DateTime updatedAt
}
"merch_cart_items" {
  String id PK
  String cartId FK
  String productId FK
  String variantId FK "nullable"
  String imageId FK "nullable"
  String uploadedImageR2Key "nullable"
  String uploadedImageUrl "nullable"
  Int quantity
  String customText "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"merch_orders" {
  String id PK
  String userId FK
  String orderNumber UK
  MerchOrderStatus status
  Decimal(10) subtotal
  Decimal(10) shippingCost
  Decimal(10) taxAmount
  Decimal(10) totalAmount
  String currency
  String stripePaymentIntentId UK "nullable"
  String stripePaymentStatus "nullable"
  Json shippingAddress
  Json billingAddress "nullable"
  String customerEmail
  String customerPhone "nullable"
  String notes "nullable"
  DateTime createdAt
  DateTime updatedAt
  DateTime paidAt "nullable"
}
"merch_order_items" {
  String id PK
  String orderId FK
  String productId FK
  String variantId FK "nullable"
  String productName
  String variantName "nullable"
  String imageUrl
  String imageR2Key
  Int quantity
  Decimal(10) unitPrice
  Decimal(10) totalPrice
  String customText "nullable"
  String podOrderId "nullable"
  String podStatus "nullable"
  DateTime createdAt
  DateTime updatedAt
  String shipmentId FK "nullable"
}
"merch_shipments" {
  String id PK
  String orderId FK
  PodProvider provider
  String providerShipId "nullable"
  String carrier "nullable"
  String trackingNumber "nullable"
  String trackingUrl "nullable"
  ShipmentStatus status
  DateTime shippedAt "nullable"
  DateTime deliveredAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"merch_order_events" {
  String id PK
  String orderId FK
  String type
  Json data "nullable"
  DateTime createdAt
}
"merch_webhook_events" {
  String id PK
  String provider
  String eventId UK
  String eventType
  Boolean processed
  Json payload
  DateTime processedAt "nullable"
  DateTime createdAt
}
"external_agent_sessions" {
  String id PK
  String externalId UK
  AgentProvider provider
  String name
  String description "nullable"
  ExternalAgentStatus status
  String sourceRepo "nullable"
  String startingBranch "nullable"
  String outputBranch "nullable"
  String pullRequestUrl "nullable"
  String planSummary "nullable"
  DateTime planApprovedAt "nullable"
  DateTime lastActivityAt "nullable"
  String errorMessage "nullable"
  Json metadata "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"agent_session_activities" {
  String id PK
  String sessionId FK
  String externalId "nullable"
  String type
  String content "nullable"
  Json metadata "nullable"
  DateTime createdAt
}
"scout_competitors" {
  String id PK
  String workspaceId FK
  SocialPlatform platform
  String handle
  String name "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"scout_competitor_posts" {
  String id PK
  String competitorId FK
  String platformPostId
  String content
  DateTime postedAt
  Int likes
  Int comments
  Int shares
  Json metadata "nullable"
  DateTime createdAt
}
"scout_benchmarks" {
  String id PK
  String workspaceId FK
  String period
  Json ownMetrics
  Json competitorMetrics
  DateTime generatedAt
}
"social_accounts" {
  String id PK
  SocialPlatform platform
  String accountId
  String accountName
  String accessTokenEncrypted
  String refreshTokenEncrypted "nullable"
  DateTime tokenExpiresAt "nullable"
  DateTime connectedAt
  SocialAccountStatus status
  Json metadata "nullable"
  String userId FK
  String workspaceId FK
  DateTime createdAt
  DateTime updatedAt
}
"social_posts" {
  String id PK
  String content
  DateTime scheduledAt "nullable"
  DateTime publishedAt "nullable"
  SocialPostStatus status
  Json metadata "nullable"
  String createdById FK
  DateTime createdAt
  DateTime updatedAt
}
"social_post_accounts" {
  String id PK
  String postId FK
  String accountId FK
  String platformPostId "nullable"
  DateTime publishedAt "nullable"
  SocialPostStatus status
  String errorMessage "nullable"
}
"social_metrics" {
  String id PK
  String accountId FK
  DateTime date
  Int followers
  Int following
  Int postsCount
  Decimal(5) engagementRate "nullable"
  Int impressions
  Int reach
  Int likes
  Int comments
  Int shares
  Json rawData "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"social_metric_anomalies" {
  String id PK
  String accountId FK
  String metricType
  DateTime detectedAt
  Float currentValue
  Float expectedValue
  Float zScore
  String severity
  String direction
  Float percentChange
  DateTime createdAt
}
"workspaces" {
  String id PK
  String name
  String slug UK
  String description "nullable"
  String avatarUrl "nullable"
  Json settings "nullable"
  Boolean isPersonal
  DateTime createdAt
  DateTime updatedAt
  DateTime deletedAt "nullable"
  WorkspaceSubscriptionTier subscriptionTier
  Int maxSocialAccounts
  Int maxScheduledPosts
  Int maxAbTests
  Int monthlyAiCredits
  Int usedAiCredits
  Int maxTeamMembers
  DateTime billingCycleStart "nullable"
  String stripeSubscriptionId UK "nullable"
}
"workspace_favorites" {
  String id PK
  String userId FK
  String workspaceId FK
  DateTime createdAt
}
"workspace_recent_access" {
  String id PK
  String userId FK
  String workspaceId FK
  DateTime accessedAt
}
"workspace_members" {
  String id PK
  String workspaceId FK
  String userId FK
  WorkspaceRole role
  DateTime invitedAt
  DateTime joinedAt "nullable"
  String invitedById FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"connections" {
  String id PK
  String workspaceId FK
  String identityId FK,UK "nullable"
  String displayName
  String avatarUrl "nullable"
  String notes "nullable"
  Int warmthScore
  Json warmthFactors "nullable"
  DateTime lastInteraction "nullable"
  Int interactionCount
  ConnectionNextStep nextStep "nullable"
  DateTime nextStepDueDate "nullable"
  String nextStepNotes "nullable"
  MeetupPipelineStatus meetupStatus
  DateTime meetupStatusUpdatedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"connection_platform_presence" {
  String id PK
  String connectionId FK
  SocialPlatform platform
  String handle
  String profileUrl "nullable"
  DateTime lastSeenAt "nullable"
}
"connection_tags" {
  String id PK
  String workspaceId FK
  String name
  String color
}
"connection_reminders" {
  String id PK
  String connectionId FK
  String workspaceId
  ReminderType type
  String title
  String description "nullable"
  DateTime dueDate
  ReminderStatus status
  DateTime snoozedUntil "nullable"
  Int snoozeCount
  DateTime completedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"meetup_status_history" {
  String id PK
  String connectionId FK
  MeetupPipelineStatus fromStatus
  MeetupPipelineStatus toStatus
  String notes "nullable"
  String updatedById "nullable"
  DateTime createdAt
}
"brand_profiles" {
  String id PK
  String workspaceId FK,UK
  String name
  String mission "nullable"
  Json values "nullable"
  Json toneDescriptors "nullable"
  String logoUrl "nullable"
  String logoR2Key "nullable"
  Json colorPalette "nullable"
  Int version
  Boolean isActive
  String createdById FK
  String updatedById FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"brand_guardrails" {
  String id PK
  String brandProfileId FK
  GuardrailType type
  String name
  String description "nullable"
  GuardrailSeverity severity
  Json ruleConfig "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"brand_vocabulary" {
  String id PK
  String brandProfileId FK
  VocabularyType type
  String term
  String replacement "nullable"
  String context "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"content_rewrites" {
  String id PK
  String workspaceId FK
  String brandProfileId FK
  String originalContent
  String rewrittenContent "nullable"
  ContentPlatform platform
  RewriteStatus status
  Int characterLimit "nullable"
  Json changes "nullable"
  Json toneAnalysis "nullable"
  String errorMessage "nullable"
  DateTime processedAt "nullable"
  String createdById FK
  DateTime createdAt
  DateTime updatedAt
}
"scheduled_posts" {
  String id PK
  String content
  DateTime scheduledAt
  String timezone
  String recurrenceRule "nullable"
  DateTime recurrenceEndAt "nullable"
  ScheduledPostStatus status
  Json metadata "nullable"
  DateTime publishedAt "nullable"
  String errorMessage "nullable"
  Int retryCount
  Int maxRetries
  DateTime lastAttemptAt "nullable"
  DateTime nextOccurrenceAt "nullable"
  String workspaceId FK
  String createdById FK
  DateTime createdAt
  DateTime updatedAt
}
"scheduled_post_accounts" {
  String id PK
  String postId FK
  String accountId FK
  String platformPostId "nullable"
  DateTime publishedAt "nullable"
  ScheduledPostStatus status
  String errorMessage "nullable"
}
"posting_time_recommendations" {
  String id PK
  String accountId FK
  Int dayOfWeek
  Int hourUtc
  Float score
  String confidence
  String reason
  DateTime lastUpdated
}
"calendar_content_suggestions" {
  String id PK
  String workspaceId FK
  String content
  DateTime suggestedFor
  SocialPlatform platform
  String reason
  ContentSuggestionStatus status
  Float confidence
  String keywords
  Json metadata "nullable"
  DateTime createdAt
  DateTime acceptedAt "nullable"
  DateTime rejectedAt "nullable"
}
"inbox_items" {
  String id PK
  InboxItemType type
  InboxItemStatus status
  SocialPlatform platform
  String platformItemId
  String content
  String senderName
  String senderHandle "nullable"
  String senderAvatarUrl "nullable"
  String originalPostId "nullable"
  String originalPostContent "nullable"
  Json metadata "nullable"
  DateTime receivedAt
  DateTime readAt "nullable"
  DateTime repliedAt "nullable"
  DateTime resolvedAt "nullable"
  String workspaceId FK
  String accountId FK
  String assignedToId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
  InboxSentiment sentiment "nullable"
  Float sentimentScore "nullable"
  Int priorityScore "nullable"
  Json priorityFactors "nullable"
  DateTime routingAnalyzedAt "nullable"
  Json routingMetadata "nullable"
  EscalationStatus escalationStatus "nullable"
  Int escalationLevel "nullable"
  DateTime escalatedAt "nullable"
  String escalatedToId FK "nullable"
  DateTime slaDeadline "nullable"
  Boolean slaBreach
}
"relay_drafts" {
  String id PK
  String content
  Float confidenceScore
  RelayDraftStatus status
  Boolean isPreferred
  String reason "nullable"
  Json metadata "nullable"
  DateTime sentAt "nullable"
  String errorMessage "nullable"
  String inboxItemId FK
  String reviewedById FK "nullable"
  DateTime reviewedAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"draft_edit_history" {
  String id PK
  String draftId FK
  String originalContent
  String editedContent
  DraftEditType editType
  String changesSummary "nullable"
  Int editDistance "nullable"
  String editedById FK
  DateTime createdAt
}
"draft_audit_logs" {
  String id PK
  String draftId FK
  DraftAuditAction action
  Json details "nullable"
  String ipAddress "nullable"
  String userAgent "nullable"
  String performedById FK
  DateTime createdAt
}
"crisis_detection_events" {
  String id PK
  String workspaceId FK
  CrisisSeverity severity
  CrisisEventStatus status
  String triggerType
  Json triggerData
  String affectedAccountIds
  DateTime acknowledgedAt "nullable"
  String acknowledgedById FK "nullable"
  DateTime resolvedAt "nullable"
  String resolvedById FK "nullable"
  String responseNotes "nullable"
  DateTime detectedAt
  DateTime createdAt
  DateTime updatedAt
}
"crisis_response_templates" {
  String id PK
  String workspaceId FK "nullable"
  String name
  String category
  SocialPlatform platform "nullable"
  String content
  String variables
  Boolean isActive
  Int usageCount
  DateTime createdAt
  DateTime updatedAt
}
"crisis_alert_rules" {
  String id PK
  String workspaceId FK
  String name
  String description "nullable"
  CrisisRuleType ruleType
  Json conditions
  CrisisSeverity severity
  String notifyChannels
  Int escalateAfterMinutes "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"social_account_health" {
  String id PK
  String accountId FK,UK
  Int healthScore
  AccountHealthStatus status
  DateTime lastSuccessfulSync "nullable"
  DateTime lastSyncAttempt "nullable"
  String lastError "nullable"
  DateTime lastErrorAt "nullable"
  Int consecutiveErrors
  Int totalErrorsLast24h
  Int rateLimitRemaining "nullable"
  Int rateLimitTotal "nullable"
  DateTime rateLimitResetAt "nullable"
  Boolean isRateLimited
  DateTime tokenExpiresAt "nullable"
  Boolean tokenRefreshRequired
  DateTime createdAt
  DateTime updatedAt
}
"recovery_guidance" {
  String id PK
  SocialPlatform platform "nullable"
  AccountIssueType issueType
  IssueSeverity severity
  String title
  String description
  Json steps
  String estimatedTime "nullable"
  Boolean requiresAction
  Boolean autoRecoverable
  DateTime createdAt
  DateTime updatedAt
}
"account_health_events" {
  String id PK
  String accountId FK
  String workspaceId FK
  AccountHealthEventType eventType
  IssueSeverity severity
  AccountHealthStatus previousStatus "nullable"
  AccountHealthStatus newStatus
  Int previousScore "nullable"
  Int newScore
  String message
  Json details "nullable"
  DateTime resolvedAt "nullable"
  String resolvedById FK "nullable"
  String resolutionNotes "nullable"
  DateTime createdAt
}
"notifications" {
  String id PK
  String workspaceId FK
  String userId "nullable"
  String type
  String title
  String message
  String priority
  Boolean read
  DateTime readAt "nullable"
  String entityType "nullable"
  String entityId "nullable"
  Json metadata "nullable"
  DateTime createdAt
}
"policy_rules" {
  String id PK
  String workspaceId FK "nullable"
  String name
  String description
  SocialPlatform platform "nullable"
  PolicyCategory category
  PolicyRuleType ruleType
  Json conditions
  PolicySeverity severity
  Boolean isBlocking
  Boolean isActive
  String sourceUrl "nullable"
  DateTime lastVerifiedAt "nullable"
  Int version
  DateTime createdAt
  DateTime updatedAt
}
"policy_checks" {
  String id PK
  String workspaceId FK
  PolicyContentType contentType
  String contentId "nullable"
  String contentText
  Json contentMetadata "nullable"
  SocialPlatform platform "nullable"
  PolicyCheckScope checkScope
  PolicyCheckStatus status
  Int passedRules
  Int failedRules
  Int warningRules
  PolicyCheckResult overallResult "nullable"
  String summary "nullable"
  DateTime startedAt
  DateTime completedAt "nullable"
  Int durationMs "nullable"
  String checkedById FK "nullable"
  DateTime createdAt
}
"policy_violations" {
  String id PK
  String checkId FK
  String ruleId FK
  String workspaceId FK
  PolicySeverity severity
  String message
  String matchedContent "nullable"
  Json matchLocation "nullable"
  Float confidence "nullable"
  String suggestedFix "nullable"
  Boolean isOverridden
  String overriddenById FK "nullable"
  String overrideReason "nullable"
  DateTime overriddenAt "nullable"
  DateTime createdAt
}
"scout_topics" {
  String id PK
  String workspaceId FK
  String name
  Json keywords
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"scout_results" {
  String id PK
  String topicId FK
  SocialPlatform platform
  String platformId
  String content
  String author
  String authorUrl "nullable"
  String postUrl
  Json engagement
  DateTime foundAt
}
"content_suggestions" {
  String id PK
  String workspaceId FK
  String title
  String description
  String draftContent
  SuggestionContentType contentType
  String suggestedPlatforms
  Json trendData
  Float relevanceScore
  Float timelinessScore
  Float brandAlignmentScore
  Float overallScore
  SuggestionStatus status
  DateTime generatedAt
  DateTime expiresAt "nullable"
  DateTime usedAt "nullable"
  DateTime dismissedAt "nullable"
  String dismissalReason "nullable"
  String feedback "nullable"
}
"allocator_campaigns" {
  String id PK
  String workspaceId FK
  AllocatorPlatform platform
  String platformCampaignId
  String name
  String status
  Decimal(10) budget "nullable"
  Decimal(10) spend
  Json metrics "nullable"
  DateTime lastSyncAt
  DateTime createdAt
  DateTime updatedAt
}
"allocator_ad_sets" {
  String id PK
  String campaignId FK
  String platformAdSetId
  String name
  String status
  Decimal(10) budget "nullable"
  Decimal(10) spend
  DateTime createdAt
  DateTime updatedAt
}
"allocator_autopilot_configs" {
  String id PK
  String workspaceId FK
  String campaignId FK "nullable"
  Boolean isEnabled
  AutopilotMode mode
  Decimal(10) maxDailyBudgetChange
  Decimal(10) maxSingleChange
  Decimal(10) minRoasThreshold "nullable"
  Decimal(10) maxCpaThreshold "nullable"
  Boolean pauseOnAnomaly
  Decimal(10) requireApprovalAbove "nullable"
  String encryptedSettings "nullable"
  Decimal(12) minBudget "nullable"
  Decimal(12) maxBudget "nullable"
  Int cooldownMinutes
  Boolean isEmergencyStopped
  DateTime emergencyStoppedAt "nullable"
  String emergencyStoppedBy "nullable"
  String emergencyStopReason "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"allocator_guardrail_alerts" {
  String id PK
  String workspaceId FK
  String campaignId FK "nullable"
  AllocatorAlertType alertType
  AlertSeverity severity
  String message
  Json metadata "nullable"
  Boolean acknowledged
  DateTime acknowledgedAt "nullable"
  String acknowledgedBy "nullable"
  DateTime createdAt
}
"allocator_autopilot_executions" {
  String id PK
  String workspaceId FK
  String campaignId FK
  String recommendationId "nullable"
  String recommendationType
  AutopilotExecutionStatus status
  Decimal(10) previousBudget
  Decimal(10) newBudget
  Decimal(10) budgetChange
  DateTime executedAt
  Json metadata "nullable"
  String rollbackOfId FK,UK "nullable"
  DateTime rolledBackAt "nullable"
  String rolledBackReason "nullable"
  String rolledBackByUserId "nullable"
}
"workflows" {
  String id PK
  String name
  String description "nullable"
  WorkflowStatus status
  String workspaceId FK
  String createdById FK
  DateTime createdAt
  DateTime updatedAt
}
"workflow_versions" {
  String id PK
  String workflowId FK
  Int version
  String description "nullable"
  Boolean isPublished
  DateTime publishedAt "nullable"
  DateTime createdAt
}
"workflow_steps" {
  String id PK
  String workflowVersionId FK
  String name
  WorkflowStepType type
  Int sequence
  Json config
  Json dependencies "nullable"
  DateTime createdAt
  String parentStepId FK "nullable"
  BranchType branchType "nullable"
  String branchCondition "nullable"
}
"workflow_runs" {
  String id PK
  String workflowId FK
  WorkflowRunStatus status
  DateTime startedAt
  DateTime endedAt "nullable"
}
"workflow_run_logs" {
  String id PK
  String workflowRunId FK
  String stepId "nullable"
  StepRunStatus stepStatus "nullable"
  String message
  Json metadata "nullable"
  DateTime timestamp
}
"workflow_schedules" {
  String id PK
  String workflowId FK
  String cronExpression
  String timezone
  Boolean isActive
  DateTime nextRunAt "nullable"
  DateTime lastRunAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"workflow_webhooks" {
  String id PK
  String workflowId FK
  String webhookToken UK
  String secretHash "nullable"
  Boolean isActive
  DateTime lastTriggeredAt "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"workflow_event_subscriptions" {
  String id PK
  String workflowId FK
  WorkflowEventType eventType
  Json filterConfig "nullable"
  Boolean isActive
  DateTime createdAt
  DateTime updatedAt
}
"allocator_daily_budget_moves" {
  String id PK
  String campaignId FK
  DateTime date
  Decimal(10) totalMoved
  Decimal(10) netChange
  Int executionCount
  DateTime createdAt
  DateTime updatedAt
}
"allocator_audit_logs" {
  String id PK
  String workspaceId FK
  String campaignId "nullable"
  AllocatorDecisionType decisionType
  AllocatorDecisionOutcome decisionOutcome
  Json recommendationSnapshot "nullable"
  Json performanceSnapshot "nullable"
  Json configSnapshot "nullable"
  Json guardrailEvaluation "nullable"
  Json previousState "nullable"
  Json newState "nullable"
  String aiReasoning "nullable"
  Json supportingData "nullable"
  String confidence "nullable"
  String executionId FK "nullable"
  String triggeredBy
  String userId "nullable"
  String correlationId
  DateTime createdAt
}
"AbTest" {
  String id PK
  String name
  String description "nullable"
  AbTestStatus status
  String winnerVariantId "nullable"
  Float significanceLevel
  DateTime createdAt
  DateTime updatedAt
}
"AbTestVariant" {
  String id PK
  String abTestId FK
  String name
  Float splitPercentage
}
"AbTestResult" {
  String id PK
  String visitorSessionId FK
  String abTestVariantId FK
  Boolean converted
  DateTime createdAt
}
"feature_flags" {
  String id PK
  String name UK
  Boolean isEnabled
  Int percentage
  String enabledFor
  DateTime createdAt
  DateTime updatedAt
}
"asset_folders" {
  String id PK
  String name
  String workspaceId FK
  String parentId FK "nullable"
  String createdById FK
  DateTime createdAt
  DateTime updatedAt
}
"asset_tags" {
  String id PK
  String name
  String workspaceId FK
  DateTime createdAt
}
"assets" {
  String id PK
  String workspaceId FK
  String folderId FK "nullable"
  String filename
  String fileType
  Int sizeBytes
  Int width "nullable"
  Int height "nullable"
  Float duration "nullable"
  String storageProvider
  String r2Bucket
  String r2Key UK
  String altText "nullable"
  Float qualityScore "nullable"
  Json analysisJson "nullable"
  String uploadedById FK
  DateTime createdAt
  DateTime updatedAt
}
"asset_tag_assignments" {
  String assetId FK
  String tagId FK
  DateTime assignedAt
  String assignedById FK
}
"post_assets" {
  String postId FK
  String assetId FK
}
"scheduled_post_assets" {
  String postId FK
  String assetId FK
}
"identities" {
  String id PK
  String userId FK,UK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"identifiers" {
  String id PK
  String identityId FK
  IdentifierType type
  String value
  DateTime createdAt
}
"_ConnectionToConnectionTag" {
  String A FK
  String B FK
}
"users" }o--o| "users" : referredBy
"campaign_briefs" }o--|| "users" : user
"campaign_target_audiences" |o--|| "campaign_briefs" : brief
"campaign_objectives" }o--|| "campaign_briefs" : brief
"accounts" }o--|| "users" : user
"marketing_accounts" }o--|| "users" : user
"google_ads_campaigns" }o--|| "marketing_accounts" : marketingAccount
"sessions" }o--|| "users" : user
"apps" }o--o| "apps" : parentApp
"apps" }o--|| "users" : user
"requirements" }o--|| "apps" : app
"monetization_models" }o--|| "apps" : app
"app_messages" }o--|| "apps" : app
"app_status_history" }o--|| "apps" : app
"app_images" }o--|| "apps" : app
"app_attachments" }o--|| "app_messages" : message
"app_attachments" }o--|| "app_images" : image
"app_code_versions" }o--|| "apps" : app
"app_code_versions" |o--o| "app_messages" : message
"user_token_balances" |o--|| "users" : user
"token_transactions" }o--|| "users" : user
"stripe_payments" }o--|| "tokens_packages" : package
"stripe_payments" }o--|| "users" : user
"enhanced_images" }o--|| "users" : user
"image_enhancement_jobs" }o--o| "enhancement_pipelines" : pipeline
"image_enhancement_jobs" }o--o| "enhanced_images" : sourceImage
"image_enhancement_jobs" }o--|| "enhanced_images" : image
"image_enhancement_jobs" }o--|| "users" : user
"subscriptions" |o--|| "users" : user
"albums" }o--o| "enhancement_pipelines" : pipeline
"albums" }o--|| "users" : user
"album_images" }o--|| "albums" : album
"album_images" }o--|| "enhanced_images" : image
"voucher_redemptions" }o--|| "users" : user
"voucher_redemptions" }o--|| "vouchers" : voucher
"referrals" }o--|| "users" : referee
"referrals" }o--|| "users" : referrer
"audit_logs" }o--|| "users" : user
"workspace_audit_logs" }o--|| "workspaces" : workspace
"workspace_audit_logs" }o--|| "users" : user
"ai_decision_logs" }o--o| "workspaces" : workspace
"ai_decision_logs" }o--o| "users" : user
"audit_retention_policies" }o--o| "workspaces" : workspace
"feedback" }o--o| "users" : user
"inbox_suggested_responses" }o--|| "inbox_items" : inboxItem
"escalation_events" }o--|| "inbox_items" : inboxItem
"featured_gallery_items" }o--o| "enhanced_images" : sourceImage
"featured_gallery_items" }o--o| "image_enhancement_jobs" : sourceJob
"featured_gallery_items" }o--|| "users" : creator
"boxes" }o--|| "users" : user
"boxes" }o--o| "box_tiers" : tier
"box_actions" }o--|| "boxes" : box
"agent_tasks" }o--|| "boxes" : box
"sandbox_jobs" }o--|| "apps" : app
"email_logs" }o--|| "users" : user
"tracked_urls" }o--|| "users" : createdBy
"api_keys" }o--|| "users" : user
"mcp_generation_jobs" }o--|| "users" : user
"mcp_generation_jobs" }o--o| "api_keys" : apiKey
"box_messages" }o--|| "boxes" : box
"enhancement_pipelines" }o--o| "users" : user
"visitor_sessions" }o--o| "users" : user
"page_views" }o--|| "visitor_sessions" : session
"analytics_events" }o--|| "visitor_sessions" : session
"campaign_attributions" }o--|| "users" : user
"audio_mixer_projects" }o--|| "users" : user
"audio_tracks" }o--|| "audio_mixer_projects" : project
"merch_products" }o--|| "merch_categories" : category
"merch_variants" }o--|| "merch_products" : product
"merch_carts" |o--|| "users" : user
"merch_cart_items" }o--|| "merch_carts" : cart
"merch_cart_items" }o--|| "merch_products" : product
"merch_cart_items" }o--o| "merch_variants" : variant
"merch_cart_items" }o--o| "enhanced_images" : image
"merch_orders" }o--|| "users" : user
"merch_order_items" }o--|| "merch_orders" : order
"merch_order_items" }o--|| "merch_products" : product
"merch_order_items" }o--o| "merch_variants" : variant
"merch_order_items" }o--o| "merch_shipments" : shipment
"merch_shipments" }o--|| "merch_orders" : order
"merch_order_events" }o--|| "merch_orders" : order
"agent_session_activities" }o--|| "external_agent_sessions" : session
"scout_competitors" }o--|| "workspaces" : workspace
"scout_competitor_posts" }o--|| "scout_competitors" : competitor
"scout_benchmarks" }o--|| "workspaces" : workspace
"social_accounts" }o--|| "users" : user
"social_accounts" }o--|| "workspaces" : workspace
"social_posts" }o--|| "users" : createdBy
"social_post_accounts" }o--|| "social_posts" : post
"social_post_accounts" }o--|| "social_accounts" : account
"social_metrics" }o--|| "social_accounts" : account
"social_metric_anomalies" }o--|| "social_accounts" : account
"workspace_favorites" }o--|| "users" : user
"workspace_favorites" }o--|| "workspaces" : workspace
"workspace_recent_access" }o--|| "users" : user
"workspace_recent_access" }o--|| "workspaces" : workspace
"workspace_members" }o--|| "workspaces" : workspace
"workspace_members" }o--|| "users" : user
"workspace_members" }o--o| "users" : invitedBy
"connections" }o--|| "workspaces" : workspace
"connections" |o--o| "identities" : identity
"connection_platform_presence" }o--|| "connections" : connection
"connection_tags" }o--|| "workspaces" : workspace
"connection_reminders" }o--|| "connections" : connection
"meetup_status_history" }o--|| "connections" : connection
"brand_profiles" |o--|| "workspaces" : workspace
"brand_profiles" }o--|| "users" : createdBy
"brand_profiles" }o--o| "users" : updatedBy
"brand_guardrails" }o--|| "brand_profiles" : brandProfile
"brand_vocabulary" }o--|| "brand_profiles" : brandProfile
"content_rewrites" }o--|| "workspaces" : workspace
"content_rewrites" }o--|| "brand_profiles" : brandProfile
"content_rewrites" }o--|| "users" : createdBy
"scheduled_posts" }o--|| "workspaces" : workspace
"scheduled_posts" }o--|| "users" : createdBy
"scheduled_post_accounts" }o--|| "scheduled_posts" : post
"scheduled_post_accounts" }o--|| "social_accounts" : account
"posting_time_recommendations" }o--|| "social_accounts" : account
"calendar_content_suggestions" }o--|| "workspaces" : workspace
"inbox_items" }o--|| "workspaces" : workspace
"inbox_items" }o--|| "social_accounts" : account
"inbox_items" }o--o| "workspace_members" : assignedTo
"inbox_items" }o--o| "workspace_members" : escalatedTo
"relay_drafts" }o--|| "inbox_items" : inboxItem
"relay_drafts" }o--o| "users" : reviewedBy
"draft_edit_history" }o--|| "users" : editedBy
"draft_edit_history" }o--|| "relay_drafts" : draft
"draft_audit_logs" }o--|| "users" : performedBy
"draft_audit_logs" }o--|| "relay_drafts" : draft
"crisis_detection_events" }o--|| "workspaces" : workspace
"crisis_detection_events" }o--o| "users" : acknowledgedBy
"crisis_detection_events" }o--o| "users" : resolvedBy
"crisis_response_templates" }o--o| "workspaces" : workspace
"crisis_alert_rules" }o--|| "workspaces" : workspace
"social_account_health" |o--|| "social_accounts" : account
"account_health_events" }o--|| "social_accounts" : account
"account_health_events" }o--|| "workspaces" : workspace
"account_health_events" }o--o| "users" : resolvedBy
"notifications" }o--|| "workspaces" : workspace
"policy_rules" }o--o| "workspaces" : workspace
"policy_checks" }o--|| "workspaces" : workspace
"policy_checks" }o--o| "users" : checkedBy
"policy_violations" }o--|| "policy_checks" : check
"policy_violations" }o--|| "policy_rules" : rule
"policy_violations" }o--|| "workspaces" : workspace
"policy_violations" }o--o| "users" : overriddenBy
"scout_topics" }o--|| "workspaces" : workspace
"scout_results" }o--|| "scout_topics" : topic
"content_suggestions" }o--|| "workspaces" : workspace
"allocator_campaigns" }o--|| "workspaces" : workspace
"allocator_ad_sets" }o--|| "allocator_campaigns" : campaign
"allocator_autopilot_configs" }o--|| "workspaces" : workspace
"allocator_autopilot_configs" }o--o| "allocator_campaigns" : campaign
"allocator_guardrail_alerts" }o--|| "workspaces" : workspace
"allocator_guardrail_alerts" }o--o| "allocator_campaigns" : campaign
"allocator_autopilot_executions" }o--|| "workspaces" : workspace
"allocator_autopilot_executions" }o--|| "allocator_campaigns" : campaign
"allocator_autopilot_executions" |o--o| "allocator_autopilot_executions" : rollbackOf
"workflows" }o--|| "workspaces" : workspace
"workflows" }o--|| "users" : createdBy
"workflow_versions" }o--|| "workflows" : workflow
"workflow_steps" }o--|| "workflow_versions" : workflowVersion
"workflow_steps" }o--o| "workflow_steps" : parentStep
"workflow_runs" }o--|| "workflows" : workflow
"workflow_run_logs" }o--|| "workflow_runs" : workflowRun
"workflow_schedules" }o--|| "workflows" : workflow
"workflow_webhooks" }o--|| "workflows" : workflow
"workflow_event_subscriptions" }o--|| "workflows" : workflow
"allocator_daily_budget_moves" }o--|| "allocator_campaigns" : campaign
"allocator_audit_logs" }o--|| "workspaces" : workspace
"allocator_audit_logs" }o--o| "allocator_autopilot_executions" : execution
"AbTestVariant" }o--|| "AbTest" : abTest
"AbTestResult" }o--|| "visitor_sessions" : visitorSession
"AbTestResult" }o--|| "AbTestVariant" : abTestVariant
"asset_folders" }o--|| "workspaces" : workspace
"asset_folders" }o--o| "asset_folders" : parent
"asset_folders" }o--|| "users" : createdBy
"asset_tags" }o--|| "workspaces" : workspace
"assets" }o--|| "workspaces" : workspace
"assets" }o--o| "asset_folders" : folder
"assets" }o--|| "users" : uploadedBy
"asset_tag_assignments" }o--|| "assets" : asset
"asset_tag_assignments" }o--|| "asset_tags" : tag
"asset_tag_assignments" }o--|| "users" : assignedBy
"post_assets" }o--|| "social_posts" : post
"post_assets" }o--|| "assets" : asset
"scheduled_post_assets" }o--|| "scheduled_posts" : post
"scheduled_post_assets" }o--|| "assets" : asset
"identities" |o--o| "users" : user
"identifiers" }o--|| "identities" : identity
"_ConnectionToConnectionTag" }o--|| "connections" : Connection
"_ConnectionToConnectionTag" }o--|| "connection_tags" : ConnectionTag
```

### `users`

Properties as follows:

- `id`:
- `name`:
- `email`:
- `emailVerified`:
- `image`:
- `createdAt`:
- `updatedAt`:
- `stripeCustomerId`:
- `role`:
- `referralCode`:
- `referredById`:
- `referralCount`:
- `passwordHash`:

### `campaign_briefs`

Properties as follows:

- `id`:
- `userId`:
- `name`:
- `targetAudience`:
- `campaignObjectives`:
- `status`:
- `createdAt`:
- `updatedAt`:

### `campaign_target_audiences`

Properties as follows:

- `id`:
- `briefId`:
- `ageMin`:
- `ageMax`:
- `genders`:
- `locations`:
- `interests`:
- `behaviors`:
- `createdAt`:
- `updatedAt`:

### `campaign_objectives`

Properties as follows:

- `id`:
- `briefId`:
- `type`:
- `metric`:
- `targetValue`:
- `deadline`:
- `priority`:
- `createdAt`:
- `updatedAt`:

### `accounts`

Properties as follows:

- `id`:
- `userId`:
- `type`:
- `provider`:
- `providerAccountId`:
- `refresh_token`:
- `access_token`:
- `expires_at`:
- `token_type`:
- `scope`:
- `id_token`:
- `session_state`:

### `marketing_accounts`

Properties as follows:

- `id`:
- `userId`:
- `platform`:
- `accountId`:
- `accountName`:
- `accessToken`:
- `refreshToken`:
- `expiresAt`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `google_ads_campaigns`

Properties as follows:

- `id`:
- `marketingAccountId`:
- `campaignId`:
- `name`:
- `status`:
- `spend`:
- `createdAt`:
- `updatedAt`:

### `sessions`

Properties as follows:

- `id`:
- `sessionToken`:
- `userId`:
- `expires`:

### `verification_tokens`

Properties as follows:

- `identifier`:
- `token`:
- `expires`:

### `apps`

Properties as follows:

- `id`:
- `name`:
- `slug`:
- `description`:
- `userId`:
- `forkedFrom`:
- `status`:
- `domain`:
- `codespaceId`:
- `codespaceUrl`:
- `isCurated`:
- `isPublic`:
- `lastAgentActivity`:
- `deletedAt`:
- `createdAt`:
- `updatedAt`:

### `requirements`

Properties as follows:

- `id`:
- `appId`:
- `description`:
- `priority`:
- `status`:
- `version`:
- `createdAt`:
- `updatedAt`:

### `monetization_models`

Properties as follows:

- `id`:
- `appId`:
- `type`:
- `price`:
- `subscriptionInterval`:
- `features`:
- `createdAt`:
- `updatedAt`:

### `app_messages`

Properties as follows:

- `id`:
- `appId`:
- `role`:
- `content`:
- `isRead`:
- `metadata`:
- `deletedAt`:
- `createdAt`:

### `app_status_history`

Properties as follows:

- `id`:
- `appId`:
- `status`:
- `message`:
- `metadata`:
- `createdAt`:

### `app_images`

Properties as follows:

- `id`:
- `appId`:
- `originalUrl`:
- `r2Key`:
- `width`:
- `height`:
- `sizeBytes`:
- `format`:
- `tags`:
- `aiDescription`:
- `analysisJson`:
- `createdAt`:

### `app_attachments`

Properties as follows:

- `id`:
- `messageId`:
- `imageId`:
- `createdAt`:

### `app_code_versions`

Properties as follows:

- `id`:
- `appId`:
- `messageId`:
- `code`:
- `hash`:
- `description`:
- `createdAt`:

### `user_token_balances`

Properties as follows:

- `id`:
- `userId`:
- `balance`:
- `lastRegeneration`:
- `tier`:
- `createdAt`:
- `updatedAt`:

### `token_transactions`

Properties as follows:

- `id`:
- `userId`:
- `amount`:
- `type`:
- `source`:
- `sourceId`:
- `balanceAfter`:
- `metadata`:
- `createdAt`:

### `tokens_packages`

Properties as follows:

- `id`:
- `name`:
- `tokens`:
- `priceUSD`:
- `stripePriceId`:
- `active`:
- `sortOrder`:
- `createdAt`:
- `updatedAt`:

### `stripe_payments`

Properties as follows:

- `id`:
- `userId`:
- `packageId`:
- `tokensGranted`:
- `amountUSD`:
- `stripePaymentIntentId`:
- `status`:
- `metadata`:
- `createdAt`:
- `updatedAt`:

### `enhanced_images`

Properties as follows:

- `id`:
- `userId`:
- `name`:
- `description`:
- `originalUrl`:
- `originalR2Key`:
- `originalWidth`:
- `originalHeight`:
- `originalSizeBytes`:
- `originalFormat`:
- `isPublic`:
- `viewCount`:
- `createdAt`:
- `updatedAt`:
- `shareToken`:

### `image_enhancement_jobs`

Properties as follows:

- `id`:
- `imageId`:
- `userId`:
- `tier`:
- `tokensCost`:
- `status`:
- `currentStage`:
- `enhancedUrl`:
- `enhancedR2Key`:
- `enhancedWidth`:
- `enhancedHeight`:
- `enhancedSizeBytes`:
- `errorMessage`:
- `retryCount`:
- `maxRetries`:
- `geminiPrompt`:
- `geminiModel`:
- `geminiTemp`:
- `processingStartedAt`:
- `processingCompletedAt`:
- `createdAt`:
- `updatedAt`:
- `workflowRunId`:
- `analysisResult`:
- `analysisSource`:
- `altText`:
- `qualityScore`:
- `wasCropped`:
- `cropDimensions`:
- `pipelineId`:
- `sourceImageId`:
- `isBlend`:
- `isAnonymous`:

### `subscriptions`

Properties as follows:

- `id`:
- `userId`:
- `stripeSubscriptionId`:
- `stripePriceId`:
- `status`:
- `tier`:
- `currentPeriodStart`:
- `currentPeriodEnd`:
- `cancelAtPeriodEnd`:
- `downgradeTo`:
- `tokensPerMonth`:
- `rolloverTokens`:
- `maxRollover`:
- `createdAt`:
- `updatedAt`:

### `subscription_plans`

Properties as follows:

- `id`:
- `name`:
- `tokensPerMonth`:
- `priceGBP`:
- `stripePriceId`:
- `maxRollover`:
- `priority`:
- `apiAccess`:
- `active`:
- `sortOrder`:
- `createdAt`:
- `updatedAt`:

### `albums`

Properties as follows:

- `id`:
- `userId`:
- `name`:
- `description`:
- `coverImageId`:
- `privacy`:
- `defaultTier`:
- `shareToken`:
- `sortOrder`:
- `createdAt`:
- `updatedAt`:
- `pipelineId`:

### `album_images`

Properties as follows:

- `id`:
- `albumId`:
- `imageId`:
- `sortOrder`:
- `addedAt`:

### `vouchers`

Properties as follows:

- `id`:
- `code`:
- `type`:
- `value`:
- `maxUses`:
- `currentUses`:
- `expiresAt`:
- `status`:
- `metadata`:
- `createdAt`:
- `updatedAt`:

### `voucher_redemptions`

Properties as follows:

- `id`:
- `voucherId`:
- `userId`:
- `tokensGranted`:
- `redeemedAt`:

### `referrals`

Properties as follows:

- `id`:
- `referrerId`:
- `refereeId`:
- `status`:
- `tokensGranted`:
- `ipAddress`:
- `createdAt`:
- `completedAt`:

### `audit_logs`

Properties as follows:

- `id`:
- `userId`:
- `action`:
- `targetId`:
- `targetType`:
- `resourceId`:
- `resourceType`:
- `metadata`:
- `ipAddress`:
- `userAgent`:
- `sessionId`:
- `createdAt`:

### `workspace_audit_logs`

Properties as follows:

- `id`:
- `workspaceId`:
- `userId`:
- `action`:
- `targetId`:
- `targetType`:
- `resourceId`:
- `resourceType`:
- `oldValue`:
- `newValue`:
- `metadata`:
- `ipAddress`:
- `userAgent`:
- `createdAt`:

### `ai_decision_logs`

Properties as follows:

- `id`:
- `workspaceId`:
- `userId`:
- `requestType`:
- `inputPrompt`:
- `inputContext`:
- `outputResult`:
- `outputMetadata`:
- `modelId`:
- `modelVersion`:
- `tokensUsed`:
- `latencyMs`:
- `status`:
- `errorMessage`:
- `createdAt`:

### `audit_retention_policies`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `description`:
- `retentionDays`:
- `archiveAfterDays`:
- `deleteAfterDays`:
- `actionTypes`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `archived_audit_logs`

Properties as follows:

- `id`:
- `originalId`:
- `workspaceId`:
- `userId`:
- `action`:
- `targetId`:
- `targetType`:
- `resourceId`:
- `resourceType`:
- `metadata`:
- `ipAddress`:
- `userAgent`:
- `originalCreatedAt`:
- `archivedAt`:
- `retentionPolicyId`:
- `archiveReason`:

### `error_logs`

Properties as follows:

- `id`:
- `timestamp`:
- `message`:
- `stack`:
- `sourceFile`:
- `sourceLine`:
- `sourceColumn`:
- `callerName`:
- `userId`:
- `route`:
- `environment`:
- `errorType`:
- `errorCode`:
- `metadata`:

### `feedback`

Properties as follows:

- `id`:
- `userId`:
- `email`:
- `type`:
- `message`:
- `page`:
- `userAgent`:
- `status`:
- `adminNote`:
- `createdAt`:
- `updatedAt`:

### `inbox_suggested_responses`

Properties as follows:

- `id`:
- `inboxItemId`:
- `content`:
- `tone`:
- `confidenceScore`:
- `category`:
- `isPreferred`:
- `metadata`:
- `createdAt`:

### `escalation_events`

Properties as follows:

- `id`:
- `inboxItemId`:
- `eventType`:
- `fromLevel`:
- `toLevel`:
- `fromUserId`:
- `toUserId`:
- `reason`:
- `triggeredBy`:
- `metadata`:
- `createdAt`:

### `featured_gallery_items`

Properties as follows:

- `id`:
- `title`:
- `description`:
- `category`:
- `originalUrl`:
- `enhancedUrl`:
- `width`:
- `height`:
- `sourceImageId`:
- `sourceJobId`:
- `sortOrder`:
- `isActive`:
- `createdAt`:
- `updatedAt`:
- `createdBy`:

### `box_tiers`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `cpu`:
- `ram`:
- `storage`:
- `pricePerHour`:
- `pricePerMonth`:
- `isActive`:
- `sortOrder`:
- `createdAt`:
- `updatedAt`:

### `boxes`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `userId`:
- `tierId`:
- `status`:
- `connectionUrl`:
- `storageVolumeId`:
- `createdAt`:
- `updatedAt`:
- `deletedAt`:

### `box_actions`

Properties as follows:

- `id`:
- `boxId`:
- `action`:
- `status`:
- `metadata`:
- `error`:
- `createdAt`:
- `updatedAt`:

### `agent_tasks`

Properties as follows:

- `id`:
- `boxId`:
- `type`:
- `payload`:
- `status`:
- `result`:
- `error`:
- `createdAt`:
- `updatedAt`:

### `sandbox_jobs`

Properties as follows:

- `id`:
- `appId`:
- `messageId`:
- `sandboxId`:
- `requestId`:
- `status`:
- `result`:
- `error`:
- `startedAt`:
- `completedAt`:

### `email_logs`

Properties as follows:

- `id`:
- `userId`:
- `to`:
- `subject`:
- `template`:
- `status`:
- `resendId`:
- `sentAt`:
- `openedAt`:
- `clickedAt`:
- `bouncedAt`:
- `metadata`:

### `tracked_urls`

Properties as follows:

- `id`:
- `path`:
- `label`:
- `isActive`:
- `createdAt`:
- `updatedAt`:
- `createdById`:

### `api_keys`

Properties as follows:

- `id`:
- `userId`:
- `name`:
- `keyHash`:
- `keyPrefix`:
- `lastUsedAt`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `mcp_generation_jobs`

Properties as follows:

- `id`:
- `userId`:
- `apiKeyId`:
- `type`:
- `tier`:
- `tokensCost`:
- `status`:
- `prompt`:
- `inputImageUrl`:
- `inputImageR2Key`:
- `outputImageUrl`:
- `outputImageR2Key`:
- `outputWidth`:
- `outputHeight`:
- `outputSizeBytes`:
- `errorMessage`:
- `geminiModel`:
- `processingStartedAt`:
- `processingCompletedAt`:
- `createdAt`:
- `updatedAt`:

### `box_messages`

Properties as follows:

- `id`:
- `boxId`:
- `role`:
- `content`:
- `createdAt`:

### `enhancement_pipelines`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `userId`:
- `visibility`:
- `shareToken`:
- `tier`:
- `analysisConfig`:
- `autoCropConfig`:
- `promptConfig`:
- `generationConfig`:
- `usageCount`:
- `createdAt`:
- `updatedAt`:

### `visitor_sessions`

Properties as follows:

- `id`:
- `visitorId`:
- `userId`:
- `sessionStart`:
- `sessionEnd`:
- `deviceType`:
- `browser`:
- `os`:
- `ipCountry`:
- `ipCity`:
- `referrer`:
- `landingPage`:
- `exitPage`:
- `pageViewCount`:
- `utmSource`:
- `utmMedium`:
- `utmCampaign`:
- `utmTerm`:
- `utmContent`:
- `gclid`:
- `fbclid`:

### `page_views`

Properties as follows:

- `id`:
- `sessionId`:
- `path`:
- `title`:
- `timestamp`:
- `timeOnPage`:
- `scrollDepth`:

### `analytics_events`

Properties as follows:

- `id`:
- `sessionId`:
- `name`:
- `category`:
- `value`:
- `metadata`:
- `timestamp`:

### `campaign_attributions`

Properties as follows:

- `id`:
- `userId`:
- `sessionId`:
- `conversionId`:
- `attributionType`:
- `platform`:
- `externalCampaignId`:
- `utmCampaign`:
- `utmSource`:
- `utmMedium`:
- `conversionType`:
- `conversionValue`:
- `convertedAt`:

### `campaign_metrics_cache`

Properties as follows:

- `id`:
- `cacheKey`:
- `metrics`:
- `computedAt`:
- `expiresAt`:

### `campaign_links`

Properties as follows:

- `id`:
- `utmCampaign`:
- `platform`:
- `externalCampaignId`:
- `externalCampaignName`:
- `createdAt`:
- `updatedAt`:

### `audio_mixer_projects`

Properties as follows:

- `id`:
- `userId`:
- `name`:
- `description`:
- `createdAt`:
- `updatedAt`:

### `audio_tracks`

Properties as follows:

- `id`:
- `projectId`:
- `name`:
- `fileUrl`:
- `fileR2Key`:
- `fileFormat`:
- `duration`:
- `fileSizeBytes`:
- `volume`:
- `muted`:
- `solo`:
- `sortOrder`:
- `storageType`:
- `createdAt`:
- `updatedAt`:

### `merch_categories`

Properties as follows:

- `id`:
- `name`:
- `slug`:
- `description`:
- `icon`:
- `sortOrder`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `merch_products`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `categoryId`:
- `provider`:
- `providerSku`:
- `basePrice`:
- `retailPrice`:
- `currency`:
- `isActive`:
- `minDpi`:
- `minWidth`:
- `minHeight`:
- `printAreaWidth`:
- `printAreaHeight`:
- `mockupTemplate`:
- `sortOrder`:
- `createdAt`:
- `updatedAt`:

### `merch_variants`

Properties as follows:

- `id`:
- `productId`:
- `name`:
- `providerSku`:
- `priceDelta`:
- `isActive`:
- `attributes`:
- `createdAt`:
- `updatedAt`:

### `merch_carts`

Properties as follows:

- `id`:
- `userId`:
- `createdAt`:
- `updatedAt`:

### `merch_cart_items`

Properties as follows:

- `id`:
- `cartId`:
- `productId`:
- `variantId`:
- `imageId`:
- `uploadedImageR2Key`:
- `uploadedImageUrl`:
- `quantity`:
- `customText`:
- `createdAt`:
- `updatedAt`:

### `merch_orders`

Properties as follows:

- `id`:
- `userId`:
- `orderNumber`:
- `status`:
- `subtotal`:
- `shippingCost`:
- `taxAmount`:
- `totalAmount`:
- `currency`:
- `stripePaymentIntentId`:
- `stripePaymentStatus`:
- `shippingAddress`:
- `billingAddress`:
- `customerEmail`:
- `customerPhone`:
- `notes`:
- `createdAt`:
- `updatedAt`:
- `paidAt`:

### `merch_order_items`

Properties as follows:

- `id`:
- `orderId`:
- `productId`:
- `variantId`:
- `productName`:
- `variantName`:
- `imageUrl`:
- `imageR2Key`:
- `quantity`:
- `unitPrice`:
- `totalPrice`:
- `customText`:
- `podOrderId`:
- `podStatus`:
- `createdAt`:
- `updatedAt`:
- `shipmentId`:

### `merch_shipments`

Properties as follows:

- `id`:
- `orderId`:
- `provider`:
- `providerShipId`:
- `carrier`:
- `trackingNumber`:
- `trackingUrl`:
- `status`:
- `shippedAt`:
- `deliveredAt`:
- `createdAt`:
- `updatedAt`:

### `merch_order_events`

Properties as follows:

- `id`:
- `orderId`:
- `type`:
- `data`:
- `createdAt`:

### `merch_webhook_events`

Properties as follows:

- `id`:
- `provider`:
- `eventId`:
- `eventType`:
- `processed`:
- `payload`:
- `processedAt`:
- `createdAt`:

### `external_agent_sessions`

Properties as follows:

- `id`:
- `externalId`:
- `provider`:
- `name`:
- `description`:
- `status`:
- `sourceRepo`:
- `startingBranch`:
- `outputBranch`:
- `pullRequestUrl`:
- `planSummary`:
- `planApprovedAt`:
- `lastActivityAt`:
- `errorMessage`:
- `metadata`:
- `createdAt`:
- `updatedAt`:

### `agent_session_activities`

Properties as follows:

- `id`:
- `sessionId`:
- `externalId`:
- `type`:
- `content`:
- `metadata`:
- `createdAt`:

### `scout_competitors`

Scout Competitor - Tracks competitor social media accounts for benchmarking.
Stores basic information about competitors that a workspace is monitoring.
Related to ScoutCompetitorPost for historical post data and ScoutBenchmark for performance comparisons.

Properties as follows:

- `id`:
- `workspaceId`:
- `platform`:
- `handle`:
- `name`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `scout_competitor_posts`

Scout Competitor Post - Historical posts from tracked competitor accounts.
Stores social media posts with engagement metrics for competitor analysis.
Posts are synced periodically and used for engagement benchmarking.

Properties as follows:

- `id`:
- `competitorId`:
- `platformPostId`:
- `content`:
- `postedAt`:
- `likes`:
- `comments`:
- `shares`:
- `metadata`:
- `createdAt`:

### `scout_benchmarks`

Scout Benchmark - Performance comparison reports between workspace and competitors.
Stores aggregated metrics comparing a workspace's social performance against tracked competitors.
Generated periodically (e.g., weekly/monthly) for trend analysis.

Properties as follows:

- `id`:
- `workspaceId`:
- `period`:
- `ownMetrics`:
- `competitorMetrics`:
- `generatedAt`:

### `social_accounts`

Properties as follows:

- `id`:
- `platform`:
- `accountId`:
- `accountName`:
- `accessTokenEncrypted`:
- `refreshTokenEncrypted`:
- `tokenExpiresAt`:
- `connectedAt`:
- `status`:
- `metadata`:
- `userId`:
- `workspaceId`:
- `createdAt`:
- `updatedAt`:

### `social_posts`

Properties as follows:

- `id`:
- `content`:
- `scheduledAt`:
- `publishedAt`:
- `status`:
- `metadata`:
- `createdById`:
- `createdAt`:
- `updatedAt`:

### `social_post_accounts`

Properties as follows:

- `id`:
- `postId`:
- `accountId`:
- `platformPostId`:
- `publishedAt`:
- `status`:
- `errorMessage`:

### `social_metrics`

Properties as follows:

- `id`:
- `accountId`:
- `date`:
- `followers`:
- `following`:
- `postsCount`:
- `engagementRate`:
- `impressions`:
- `reach`:
- `likes`:
- `comments`:
- `shares`:
- `rawData`:
- `createdAt`:
- `updatedAt`:

### `social_metric_anomalies`

Detected anomalies in social media metrics
Used by Pulse AI Agent for alerting
Resolves #647

Properties as follows:

- `id`:
- `accountId`:
- `metricType`:
- `detectedAt`:
- `currentValue`:
- `expectedValue`:
- `zScore`:
- `severity`:
- `direction`:
- `percentChange`:
- `createdAt`:

### `workspaces`

Properties as follows:

- `id`:
- `name`:
- `slug`:
- `description`:
- `avatarUrl`:
- `settings`:
- `isPersonal`:
- `createdAt`:
- `updatedAt`:
- `deletedAt`:
- `subscriptionTier`:
- `maxSocialAccounts`:
- `maxScheduledPosts`:
- `maxAbTests`:
- `monthlyAiCredits`:
- `usedAiCredits`:
- `maxTeamMembers`:
- `billingCycleStart`:
- `stripeSubscriptionId`:

### `workspace_favorites`

Properties as follows:

- `id`:
- `userId`:
- `workspaceId`:
- `createdAt`:

### `workspace_recent_access`

Properties as follows:

- `id`:
- `userId`:
- `workspaceId`:
- `accessedAt`:

### `workspace_members`

Properties as follows:

- `id`:
- `workspaceId`:
- `userId`:
- `role`:
- `invitedAt`:
- `joinedAt`:
- `invitedById`:
- `createdAt`:
- `updatedAt`:

### `connections`

Properties as follows:

- `id`:
- `workspaceId`:
- `identityId`:
- `displayName`:
- `avatarUrl`:
- `notes`:
- `warmthScore`:
- `warmthFactors`:
- `lastInteraction`:
- `interactionCount`:
- `nextStep`:
- `nextStepDueDate`:
- `nextStepNotes`:
- `meetupStatus`:
- `meetupStatusUpdatedAt`:
- `createdAt`:
- `updatedAt`:

### `connection_platform_presence`

Properties as follows:

- `id`:
- `connectionId`:
- `platform`:
- `handle`:
- `profileUrl`:
- `lastSeenAt`:

### `connection_tags`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `color`:

### `connection_reminders`

Properties as follows:

- `id`:
- `connectionId`:
- `workspaceId`:
- `type`:
- `title`:
- `description`:
- `dueDate`:
- `status`:
- `snoozedUntil`:
- `snoozeCount`:
- `completedAt`:
- `createdAt`:
- `updatedAt`:

### `meetup_status_history`

Properties as follows:

- `id`:
- `connectionId`:
- `fromStatus`:
- `toStatus`:
- `notes`:
- `updatedById`:
- `createdAt`:

### `brand_profiles`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `mission`:
- `values`:
- `toneDescriptors`:
- `logoUrl`:
- `logoR2Key`:
- `colorPalette`:
- `version`:
- `isActive`:
- `createdById`:
- `updatedById`:
- `createdAt`:
- `updatedAt`:

### `brand_guardrails`

Properties as follows:

- `id`:
- `brandProfileId`:
- `type`:
- `name`:
- `description`:
- `severity`:
- `ruleConfig`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `brand_vocabulary`

Properties as follows:

- `id`:
- `brandProfileId`:
- `type`:
- `term`:
- `replacement`:
- `context`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `content_rewrites`

Properties as follows:

- `id`:
- `workspaceId`:
- `brandProfileId`:
- `originalContent`:
- `rewrittenContent`:
- `platform`:
- `status`:
- `characterLimit`:
- `changes`:
- `toneAnalysis`:
- `errorMessage`:
- `processedAt`:
- `createdById`:
- `createdAt`:
- `updatedAt`:

### `scheduled_posts`

Scheduled posts for the Calendar feature
Supports multi-platform cross-posting and recurrence

Properties as follows:

- `id`:
- `content`:
- `scheduledAt`:
- `timezone`:
- `recurrenceRule`:
- `recurrenceEndAt`:
- `status`:
- `metadata`:
- `publishedAt`:
- `errorMessage`:
- `retryCount`:
- `maxRetries`:
- `lastAttemptAt`:
- `nextOccurrenceAt`:
- `workspaceId`:
- `createdById`:
- `createdAt`:
- `updatedAt`:

### `scheduled_post_accounts`

Join table for cross-posting scheduled posts to multiple social accounts

Properties as follows:

- `id`:
- `postId`:
- `accountId`:
- `platformPostId`:
- `publishedAt`:
- `status`:
- `errorMessage`:

### `posting_time_recommendations`

AI-generated posting time recommendations per social account
Stores optimal posting times based on historical engagement data

Properties as follows:

- `id`:
- `accountId`:
- `dayOfWeek`:
- `hourUtc`:
- `score`:
- `confidence`:
- `reason`:
- `lastUpdated`:

### `calendar_content_suggestions`

AI-generated content suggestions for the calendar
Provides content ideas based on trends, gaps, and optimal times

Properties as follows:

- `id`:
- `workspaceId`:
- `content`:
- `suggestedFor`:
- `platform`:
- `reason`:
- `status`:
- `confidence`:
- `keywords`:
- `metadata`:
- `createdAt`:
- `acceptedAt`:
- `rejectedAt`:

### `inbox_items`

Represents incoming social interactions that need attention

Properties as follows:

- `id`:
- `type`:
- `status`:
- `platform`:
- `platformItemId`:
- `content`:
- `senderName`:
- `senderHandle`:
- `senderAvatarUrl`:
- `originalPostId`:
- `originalPostContent`:
- `metadata`:
- `receivedAt`:
- `readAt`:
- `repliedAt`:
- `resolvedAt`:
- `workspaceId`:
- `accountId`:
- `assignedToId`:
- `createdAt`:
- `updatedAt`:
- `sentiment`:
- `sentimentScore`:
- `priorityScore`:
- `priorityFactors`:
- `routingAnalyzedAt`:
- `routingMetadata`:
- `escalationStatus`:
- `escalationLevel`:
- `escalatedAt`:
- `escalatedToId`:
- `slaDeadline`:
- `slaBreach`:

### `relay_drafts`

AI-generated response drafts for inbox items

Properties as follows:

- `id`:
- `content`:
- `confidenceScore`:
- `status`:
- `isPreferred`:
- `reason`:
- `metadata`:
- `sentAt`:
- `errorMessage`:
- `inboxItemId`:
- `reviewedById`:
- `reviewedAt`:
- `createdAt`:
- `updatedAt`:

### `draft_edit_history`

Properties as follows:

- `id`:
- `draftId`:
- `originalContent`:
- `editedContent`:
- `editType`:
- `changesSummary`:
- `editDistance`:
- `editedById`:
- `createdAt`:

### `draft_audit_logs`

Properties as follows:

- `id`:
- `draftId`:
- `action`:
- `details`:
- `ipAddress`:
- `userAgent`:
- `performedById`:
- `createdAt`:

### `crisis_detection_events`

Properties as follows:

- `id`:
- `workspaceId`:
- `severity`:
- `status`:
- `triggerType`:
- `triggerData`:
- `affectedAccountIds`:
- `acknowledgedAt`:
- `acknowledgedById`:
- `resolvedAt`:
- `resolvedById`:
- `responseNotes`:
- `detectedAt`:
- `createdAt`:
- `updatedAt`:

### `crisis_response_templates`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `category`:
- `platform`:
- `content`:
- `variables`:
- `isActive`:
- `usageCount`:
- `createdAt`:
- `updatedAt`:

### `crisis_alert_rules`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `description`:
- `ruleType`:
- `conditions`:
- `severity`:
- `notifyChannels`:
- `escalateAfterMinutes`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `social_account_health`

Tracks the health status of each connected social account
Provides real-time monitoring of sync status, rate limits, and token health

Properties as follows:

- `id`:
- `accountId`:
- `healthScore`:
- `status`:
- `lastSuccessfulSync`:
- `lastSyncAttempt`:
- `lastError`:
- `lastErrorAt`:
- `consecutiveErrors`:
- `totalErrorsLast24h`:
- `rateLimitRemaining`:
- `rateLimitTotal`:
- `rateLimitResetAt`:
- `isRateLimited`:
- `tokenExpiresAt`:
- `tokenRefreshRequired`:
- `createdAt`:
- `updatedAt`:

### `recovery_guidance`

Recovery guidance templates for common account issues
Provides step-by-step instructions for resolving problems

Properties as follows:

- `id`:
- `platform`:
- `issueType`:
- `severity`:
- `title`:
- `description`:
- `steps`:
- `estimatedTime`:
- `requiresAction`:
- `autoRecoverable`:
- `createdAt`:
- `updatedAt`:

### `account_health_events`

Account health events log for tracking status changes and issues

Properties as follows:

- `id`:
- `accountId`:
- `workspaceId`:
- `eventType`:
- `severity`:
- `previousStatus`:
- `newStatus`:
- `previousScore`:
- `newScore`:
- `message`:
- `details`:
- `resolvedAt`:
- `resolvedById`:
- `resolutionNotes`:
- `createdAt`:

### `notifications`

Stores notifications for workspace users
Supports various notification types: health alerts, pulse anomalies, inbox mentions, system messages

Properties as follows:

- `id`:
- `workspaceId`:
- `userId`:
- `type`:
- `title`:
- `message`:
- `priority`:
- `read`:
- `readAt`:
- `entityType`:
- `entityId`:
- `metadata`:
- `createdAt`:

### `policy_rules`

Policy rules for content validation across platforms
Stores platform-specific and global policy configurations

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `description`:
- `platform`:
- `category`:
- `ruleType`:
- `conditions`:
- `severity`:
- `isBlocking`:
- `isActive`:
- `sourceUrl`:
- `lastVerifiedAt`:
- `version`:
- `createdAt`:
- `updatedAt`:

### `policy_checks`

Records of policy check executions
Tracks what content was checked and the overall result

Properties as follows:

- `id`:
- `workspaceId`:
- `contentType`:
- `contentId`:
- `contentText`:
- `contentMetadata`:
- `platform`:
- `checkScope`:
- `status`:
- `passedRules`:
- `failedRules`:
- `warningRules`:
- `overallResult`:
- `summary`:
- `startedAt`:
- `completedAt`:
- `durationMs`:
- `checkedById`:
- `createdAt`:

### `policy_violations`

Individual policy violations detected during checks
Links violations to specific rules and provides remediation guidance

Properties as follows:

- `id`:
- `checkId`:
- `ruleId`:
- `workspaceId`:
- `severity`:
- `message`:
- `matchedContent`:
- `matchLocation`:
- `confidence`:
- `suggestedFix`:
- `isOverridden`:
- `overriddenById`:
- `overrideReason`:
- `overriddenAt`:
- `createdAt`:

### `scout_topics`

Properties as follows:

- `id`:
- `workspaceId`:
- `name`:
- `keywords`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `scout_results`

Properties as follows:

- `id`:
- `topicId`:
- `platform`:
- `platformId`:
- `content`:
- `author`:
- `authorUrl`:
- `postUrl`:
- `engagement`:
- `foundAt`:

### `content_suggestions`

AI-generated content suggestions based on trends and competitor analysis

Properties as follows:

- `id`:
- `workspaceId`:
- `title`:
- `description`:
- `draftContent`:
- `contentType`:
- `suggestedPlatforms`:
- `trendData`:
- `relevanceScore`:
- `timelinessScore`:
- `brandAlignmentScore`:
- `overallScore`:
- `status`:
- `generatedAt`:
- `expiresAt`:
- `usedAt`:
- `dismissedAt`:
- `dismissalReason`:
- `feedback`:

### `allocator_campaigns`

Properties as follows:

- `id`:
- `workspaceId`:
- `platform`:
- `platformCampaignId`:
- `name`:
- `status`:
- `budget`:
- `spend`:
- `metrics`:
- `lastSyncAt`:
- `createdAt`:
- `updatedAt`:

### `allocator_ad_sets`

Properties as follows:

- `id`:
- `campaignId`:
- `platformAdSetId`:
- `name`:
- `status`:
- `budget`:
- `spend`:
- `createdAt`:
- `updatedAt`:

### `allocator_autopilot_configs`

Properties as follows:

- `id`:
- `workspaceId`:
- `campaignId`:
- `isEnabled`:
- `mode`:
- `maxDailyBudgetChange`:
- `maxSingleChange`:
- `minRoasThreshold`:
- `maxCpaThreshold`:
- `pauseOnAnomaly`:
- `requireApprovalAbove`:
- `encryptedSettings`:
- `minBudget`:
- `maxBudget`:
- `cooldownMinutes`:
- `isEmergencyStopped`:
- `emergencyStoppedAt`:
- `emergencyStoppedBy`:
- `emergencyStopReason`:
- `createdAt`:
- `updatedAt`:

### `allocator_guardrail_alerts`

Properties as follows:

- `id`:
- `workspaceId`:
- `campaignId`:
- `alertType`:
- `severity`:
- `message`:
- `metadata`:
- `acknowledged`:
- `acknowledgedAt`:
- `acknowledgedBy`:
- `createdAt`:

### `allocator_autopilot_executions`

Properties as follows:

- `id`:
- `workspaceId`:
- `campaignId`:
- `recommendationId`:
- `recommendationType`:
- `status`:
- `previousBudget`:
- `newBudget`:
- `budgetChange`:
- `executedAt`:
- `metadata`:
- `rollbackOfId`:
- `rolledBackAt`:
- `rolledBackReason`:
- `rolledBackByUserId`:

### `workflows`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `status`:
- `workspaceId`:
- `createdById`:
- `createdAt`:
- `updatedAt`:

### `workflow_versions`

Properties as follows:

- `id`:
- `workflowId`:
- `version`:
- `description`:
- `isPublished`:
- `publishedAt`:
- `createdAt`:

### `workflow_steps`

Properties as follows:

- `id`:
- `workflowVersionId`:
- `name`:
- `type`:
- `sequence`:
- `config`:
- `dependencies`:
- `createdAt`:
- `parentStepId`:
- `branchType`:
- `branchCondition`:

### `workflow_runs`

Properties as follows:

- `id`:
- `workflowId`:
- `status`:
- `startedAt`:
- `endedAt`:

### `workflow_run_logs`

Properties as follows:

- `id`:
- `workflowRunId`:
- `stepId`:
- `stepStatus`:
- `message`:
- `metadata`:
- `timestamp`:

### `workflow_schedules`

Properties as follows:

- `id`:
- `workflowId`:
- `cronExpression`:
- `timezone`:
- `isActive`:
- `nextRunAt`:
- `lastRunAt`:
- `createdAt`:
- `updatedAt`:

### `workflow_webhooks`

Properties as follows:

- `id`:
- `workflowId`:
- `webhookToken`:
- `secretHash`:
- `isActive`:
- `lastTriggeredAt`:
- `createdAt`:
- `updatedAt`:

### `workflow_event_subscriptions`

Properties as follows:

- `id`:
- `workflowId`:
- `eventType`:
- `filterConfig`:
- `isActive`:
- `createdAt`:
- `updatedAt`:

### `allocator_daily_budget_moves`

Properties as follows:

- `id`:
- `campaignId`:
- `date`:
- `totalMoved`:
- `netChange`:
- `executionCount`:
- `createdAt`:
- `updatedAt`:

### `allocator_audit_logs`

Properties as follows:

- `id`:
- `workspaceId`:
- `campaignId`:
- `decisionType`:
- `decisionOutcome`:
- `recommendationSnapshot`:
- `performanceSnapshot`:
- `configSnapshot`:
- `guardrailEvaluation`:
- `previousState`:
- `newState`:
- `aiReasoning`:
- `supportingData`:
- `confidence`:
- `executionId`:
- `triggeredBy`:
- `userId`:
- `correlationId`:
- `createdAt`:

### `AbTest`

Properties as follows:

- `id`:
- `name`:
- `description`:
- `status`:
- `winnerVariantId`:
- `significanceLevel`:
- `createdAt`:
- `updatedAt`:

### `AbTestVariant`

Properties as follows:

- `id`:
- `abTestId`:
- `name`:
- `splitPercentage`:

### `AbTestResult`

Properties as follows:

- `id`:
- `visitorSessionId`:
- `abTestVariantId`:
- `converted`:
- `createdAt`:

### `feature_flags`

Properties as follows:

- `id`:
- `name`:
- `isEnabled`:
- `percentage`:
- `enabledFor`:
- `createdAt`:
- `updatedAt`:

### `asset_folders`

Properties as follows:

- `id`:
- `name`:
- `workspaceId`:
- `parentId`:
- `createdById`:
- `createdAt`:
- `updatedAt`:

### `asset_tags`

Properties as follows:

- `id`:
- `name`:
- `workspaceId`:
- `createdAt`:

### `assets`

Properties as follows:

- `id`:
- `workspaceId`:
- `folderId`:
- `filename`:
- `fileType`:
- `sizeBytes`:
- `width`:
- `height`:
- `duration`:
- `storageProvider`:
- `r2Bucket`:
- `r2Key`:
- `altText`:
- `qualityScore`:
- `analysisJson`:
- `uploadedById`:
- `createdAt`:
- `updatedAt`:

### `asset_tag_assignments`

Properties as follows:

- `assetId`:
- `tagId`:
- `assignedAt`:
- `assignedById`:

### `post_assets`

Properties as follows:

- `postId`:
- `assetId`:

### `scheduled_post_assets`

Properties as follows:

- `postId`:
- `assetId`:

### `identities`

Properties as follows:

- `id`:
- `userId`:
- `createdAt`:
- `updatedAt`:

### `identifiers`

Properties as follows:

- `id`:
- `identityId`:
- `type`:
- `value`:
- `createdAt`:

### `_ConnectionToConnectionTag`

Pair relationship table between [connections](#connections) and [connection_tags](#connection_tags)

Properties as follows:

- `A`:
- `B`:
