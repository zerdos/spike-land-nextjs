{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "installCommand": "rm -f .yarnrc.yml yarn.lock .pnp.cjs .pnp.loader.mjs && rm -rf .yarn && npm install",
  "buildCommand": "yarn workspace @spike-npm-land/shared build && prisma generate --no-hints && DATABASE_URL='postgresql://dummy:dummy@dummy/dummy' NODE_OPTIONS='--max-old-space-size=4096' next build --turbopack",
  "ignoreCommand": "[ \"$VERCEL_GIT_COMMIT_REF\" != \"main\" ]",
  "redirects": [
    {
      "source": "/:path*",
      "has": [
        {
          "type": "host",
          "value": "www.spike.land"
        }
      ],
      "destination": "https://spike.land/:path*",
      "permanent": true
    }
  ],
  "crons": [
    {
      "path": "/api/cron/publish-scheduled-posts",
      "schedule": "* * * * *"
    },
    {
      "path": "/api/cron/pulse-metrics",
      "schedule": "*/15 * * * *"
    },
    {
      "path": "/api/cron/cleanup-jobs",
      "schedule": "*/15 * * * *"
    },
    {
      "path": "/api/cron/marketing-sync",
      "schedule": "0 * * * *"
    },
    {
      "path": "/api/cron/allocator-autopilot",
      "schedule": "*/15 * * * *"
    },
    {
      "path": "/api/cron/cleanup-tracking",
      "schedule": "0 3 * * *"
    },
    {
      "path": "/api/cron/cleanup-errors",
      "schedule": "0 4 * * *"
    },
    {
      "path": "/api/cron/cleanup-bin",
      "schedule": "0 2 * * *"
    },
    {
      "path": "/api/cron/cleanup-sandboxes",
      "schedule": "*/15 * * * *"
    },
    {
      "path": "/api/cron/reset-workspace-credits",
      "schedule": "0 0 * * *"
    }
  ]
}
